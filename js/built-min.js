!function e(t,n,r){function i(u,a){if(!n[u]){if(!t[u]){var s="function"==typeof require&&require;if(!a&&s)return s(u,!0);if(o)return o(u,!0);var c=new Error("Cannot find module '"+u+"'");throw c.code="MODULE_NOT_FOUND",c}var f=n[u]={exports:{}};t[u][0].call(f.exports,function(e){var n=t[u][1][e];return i(n?n:e)},f,f.exports,e,t,n,r)}return n[u].exports}for(var o="function"==typeof require&&require,u=0;u<r.length;u++)i(r[u]);return i}({1:[function(e,t){t.exports={host:"api.built.io",port:443,protocol:"https",version:"v1",adaptor:"RestfullAdaptor",persistSession:"COOKIE",cachePolicy:"ONLY_NETWORK",socketData:null,app_info:{name:"",app_variables:{},uid:""},event_properties:{}}},{}],2:[function(e,t){function n(e){return o.mixin({},s(e))}function r(e,t,n){return o.find(o.where({uid:e}),n.data[t])||{}}function i(e,t){var n=o.indexOf(e.uid,o.map(o.prop("uid"),t));return o.remove(n,1,t)}var o=e("ramda"),u=e("./utilities/utility"),a=e("./utilities/instanceMethodBuilder")(),s=o.prop("data"),c=o.compose(o.prop("others"),s),f=t.exports=function(e){var n=o.mixin({},e);e.users&&u.isArray(e.users)||(n.users=[]),e.roles&&u.isArray(e.roles)||(n.roles=[]),e.others&&u.isObject(e.others)||(n.others={}),e.can&&u.isArray(e.can)||(n.can=[]);var r={toJSON:function(){return e},data:n};return a.build(t.exports,r)},l=o.curry(function(e,t,r,u,a){var c=n(a);c[t]=[].concat(a.data[t]);var l=o.mixin({},o.find(o.propEq("uid",r),s(a)[t]));if(l.uid)c[t]=i(l,c[t]),l[e]=u,c[t].push(l);else{var p={};p.uid=r,p[e]=u,c[t].push(p)}return f(c)});t.exports.getPublicDeleteAccess=function(e){return c(e).delete},a.define("getPublicDeleteAccess",1),t.exports.getPublicReadAccess=function(e){return c(e).read},a.define("getPublicReadAccess",1),t.exports.getPublicUpdateAccess=function(e){return c(e).update},a.define("getPublicUpdateAccess",1),t.exports.getRoleDeleteAccess=o.curry(function(e,t){return r(e,"roles",t).delete}),a.define("getRoleDeleteAccess",2),t.exports.getRoleReadAccess=o.curry(function(e,t){return r(e,"roles",t).read}),a.define("getRoleReadAccess",2),t.exports.getRoleUpdateAccess=o.curry(function(e,t){return r(e,"roles",t).update}),a.define("getRoleUpdateAccess",2),t.exports.getUserDeleteAccess=o.curry(function(e,t){return r(e,"users",t).delete}),a.define("getUserDeleteAccess",2),t.exports.getUserReadAccess=o.curry(function(e,t){return r(e,"users",t).read}),a.define("getUserReadAccess",2),t.exports.getUserUpdateAccess=o.curry(function(e,t){return r(e,"users",t).update}),a.define("getUserUpdateAccess",2),t.exports.isDisabled=function(e){return!!s(e).disable},a.define("isDisabled",1),t.exports.setPublicDeleteAccess=o.curry(function(e,t){var r=n(t);return r.others=o.mixin({},t.data.others),r.others["delete"]=e,f(r)}),a.define("setPublicDeleteAccess",2),t.exports.setPublicUpdateAccess=o.curry(function(e,t){var r=n(t);return r.others=o.mixin({},t.data.others),r.others.update=e,f(r)}),a.define("setPublicUpdateAccess",2),t.exports.setPublicReadAccess=o.curry(function(e,t){var r=n(t);return r.others=o.mixin({},t.data.others),r.others.read=e,f(r)}),a.define("setPublicReadAccess",2),t.exports.setRoleDeleteAccess=l("delete","roles"),a.define("setRoleDeleteAccess",3),t.exports.setRoleUpdateAccess=l("update","roles"),a.define("setRoleUpdateAccess",3),t.exports.setRoleReadAccess=l("read","roles"),a.define("setRoleReadAccess",3),t.exports.setUserDeleteAccess=l("delete","users"),a.define("setUserDeleteAccess",3),t.exports.setUserUpdateAccess=l("update","users"),a.define("setUserUpdateAccess",3),t.exports.setUserReadAccess=l("read","users"),a.define("setUserReadAccess",3),t.exports.disable=function(e){var t=o.mixin({},s(e));return t.disable=!0,f(t)},a.define("disable",1),t.exports.enable=function(e){var t=o.mixin({},s(e));return t.disable=!1,f(t)},a.define("enable",1),t.exports.canUpdate=function(e){return s(e).can.indexOf("update")>-1},a.define("canUpdate",1),t.exports.canDelete=function(e){return s(e).can.indexOf("delete")>-1},a.define("canDelete",1)},{"./utilities/instanceMethodBuilder":23,"./utilities/utility":25,ramda:32}],3:[function(e,t){function n(e){return{headers:e.headers,status:e.status,entity:e.entity}}function r(e){var t=a.defer();return e.onreadystatechange=function(){4==e.readyState&&(e.status>=200&&e.status<300?(s.trigger("upload:end"),t.resolve(e.responseText)):t.reject(e.statusText))},e.ontimeout=e.onerror=function(){t.reject(e.statusText)},t}var i=e("rest"),o=e("rest/interceptor/mime"),u=e("rest/interceptor/errorCode"),a=e("when"),s=e("../events"),c=i.wrap(o,{mime:"application/json"}).wrap(u,{code:400});t.exports.makeCall=function(e){return s.trigger("http:start"),c(e).then(function(e){return s.trigger("http:end"),n(e)}).catch(function(e){throw n(e)})},t.exports.makeXMLHttpRequest=function(e){s.trigger("upload:start");var t=new XMLHttpRequest;t.open("POST",e.url,!0);for(var n in e.headers)t.setRequestHeader(n,e.headers[n]);var i=r(t);return t.upload.onprogress=function(e){i.notify({bytesUploaded:e.loaded,bytesTotal:e.total,timestamp:e.timeStamp})},t.send(e.formData),i.promise}},{"../events":10,rest:42,"rest/interceptor/errorCode":37,"rest/interceptor/mime":38,when:62}],4:[function(e,t){function n(e){return{headers:e.headers,status:e.statusCode,entity:e.body}}function r(e){var t=o.defer();return e.onreadystatechange=function(){4==e.readyState&&(e.status>=200&&e.status<300?(u.trigger("upload:end"),t.resolve(e.responseText)):t.reject(e.statusText))},e.ontimeout=e.onerror=function(){t.reject(e.statusText)},t}var i=e("ramda"),o=e("when"),u=e("../events"),a=e("../utilities/utility");t.exports.makeCall=i.curry(function(e,t){function r(e){e.emit("api",{headers:t.headers,method:t.method,url:s,body:t.entity},function(e,t){t.statusCode>=200&&t.statusCode<300?i.resolve(n(t)):i.reject(n(t)),e&&i.reject(n(e))})}var i=o.defer(),u=t.path,s=u.substr(u.search("/v"));if(t.params)for(var c in t.params)s=a.addParam(s,c,t.params);return e.isSocketConnected()?r(e.getSocket()):e.getAdhocOperations().push(r),i.promise}),t.exports.makeXMLHttpRequest=function(e){u.trigger("upload:start");var t=new XMLHttpRequest;t.open("POST",e.url,!0);for(var n in e.headers)t.setRequestHeader(n,e.headers[n]);var i=r(t);return t.upload.onprogress=function(e){i.notify({bytesUploaded:e.loaded,bytesTotal:e.total,timestamp:e.timeStamp})},t.send(e.formData),i.promise}},{"../events":10,"../utilities/utility":25,ramda:32,when:62}],5:[function(e,t){function n(e){var t={};return e.forEach(function(e){var n=t[e.getUid()]||[];n.push(u.keyValue("properties",e.getProperties())),t[e.getUid()]=n}),t}function r(e,t){var n=e.app;return t?n.getURL()+c:n.getURL()+"/events/"+e.getUid()+s}function i(e){return o.mixin({},l(e))}{var o=e("ramda"),u=e("./utilities/utility"),a=e("./utilities/instanceMethodBuilder")(),s="/trigger",c="/events/trigger_multiple",f=t.exports=o.curry(function(e,n,r,i){var o={app:e,headers:n,uid:r,properties:i};return a.build(t.exports,o)});t.exports.getHeaders=function(e){return e.headers}}a.define("getHeaders",1);var l=t.exports.getProperties=function(e){return e.properties};a.define("getProperties",1);t.exports.getUid=function(e){return e.uid};a.define("getUid",1),t.exports.setUid=o.curry(function(e,t){return f(t.app,t.headers,e,t.properties)}),a.define("setUid",2);var p=t.exports.getCombinedHeaders=function(e){var t=e.app,n=t.getHeaders(),r=o.mixin(n,e.getHeaders());return r};a.define("getCombinedHeaders",1);var d=o.curry(function(e,t,n){t instanceof Date&&(t=t.toISOString());var r=i(n);return r[e]=t,f(n.app,n.headers,n.uid,r)});t.exports.setProperties=o.curry(function(e,t){var n=o.mixin(e,i(t));return f(t.app,t.headers,t.uid,n)}),a.define("setProperties",2),t.exports.setCreatedAt=d("created_at"),a.define("setCreatedAt",2),t.exports.setPreviousEventUid=d("previous_event_uid"),a.define("setPreviousEventUid",2),t.exports.trigger=o.curry(function(e){var t=u.keyValue,n=(o.mixin(e.app.getEventProperties(),e.getProperties()),t("event",t("properties",e.getProperties()))),i=e.app.options.adaptor,a=u.getAdaptorObj("POST",r(e,!1),p(e),n,null);return i.makeCall(a).then(function(){return f(e.app,e.headers,e.getUid(),e.getProperties())})}),a.define("trigger",1),t.exports.triggerMultiple=o.curry(function(e){var t,i=u.keyValue;if(u.isArray(e)){if(!(e.length>0))throw new Error("Events array is empty");t=e[0]}var a=o.mixin(i("events",n(e)),i("super_properties",e[0].app.getEventProperties())),s=t.app.options.adaptor,c=u.getAdaptorObj("POST",r(t,!0),p(t),a,null);return s.makeCall(c).then(function(){return e})}),a.define("triggerMultiple",1)},{"./utilities/instanceMethodBuilder":23,"./utilities/utility":25,ramda:32}],6:[function(e,t){function n(e){pluginsHelper.plugins.map(function(t){t.realtime&&t.realtime.onAppInstance&&t.realtime.onAppInstance(e)})}function r(e){pluginsHelper.plugins.map(function(t){t.realtime&&t.realtime.onClassCons&&t.realtime.onClassCons(e),t.realtime&&t.realtime.onUploadCons&&t.realtime.onUploadCons(e),t.realtime&&t.realtime.onUserCons&&t.realtime.onUserCons(e),t.realtime&&t.realtime.onRoleCons&&t.realtime.onRoleCons(e),t.realtime&&t.realtime.onInstallationCons&&t.realtime.onInstallationCons(e)})}function i(e,t){g.Session.COOKIE===j(t).persistSession?w.set(s(R(t)),e.authtoken):g.Session.LOCAL_STORAGE===j(t).persistSession&&A.set(s(R(t)),e)}function o(e){var n=p.getAdaptorObj("GET",t.exports.getURL(e)+"/application/users/current",t.exports.getHeaders(e),null,null);return u(e,n)}function u(e,t){var n=e.options.adaptor;return n.makeCall(t).then(function(t){var n=e.Class(E.APP_USER_CLS).ObjectCons({},{},t.entity.application_user,{});return e.setSession(n.toJSON()),n})}function a(e,t){var n={};return n.application_api_key=t,p.isBrowser()&&(g.Session.COOKIE===e.persistSession&&""!==w.get(s(t))?n.authtoken=w.get(s(t)):g.Session.LOCAL_STORAGE===e.persistSession&&A.get(s(t))&&(n.authtoken=A.get(s(t)).authtoken)),n}function s(e){return _+"_"+e}{var c=e("ramda"),f=(e("../config"),e("./class")),l=e("./upload"),p=e("./utilities/utility"),d=e("./user"),h=e("./utilities/instanceMethodBuilder")(),g=e("./built"),y=e("./role"),m=e("./notifications"),v=e("./installation"),x=e("./extension"),b=e("./analytics"),w=e("./session/cookie"),A=e("./session/local_storage"),E=e("./constants"),C=e("when");e("./adaptors/RestfullAdaptor"),e("./adaptors/SocketAdaptor")}e("./realtime");var _="bauthtoken",O=t.exports=c.curry(function(e,i){var o={},u=g.Session[e.persistSession];p.isBrowser()||(u="NONE"),o.options=void 0!==e.headers?e:S(e.host,e.port,e.protocol,e.version,e.adaptor,a(e,i),u,g.CachePolicy[e.cachePolicy],e.app_info,e.event_properties,e.socketData),o.Class=f(o,{},{}),p.copyProperties(o.Class,f);var s=(d(o,o.Class(E.APP_USER_CLS)),d(o,o.Class(E.APP_USER_CLS),{},{},{})),c=y(o,o.Class(E.APP_ROLE_CLS),{},{},{}),w=v(o,o.Class(E.APP_INSTALLATION_CLS),{},{},{}),A=m(o,{}),C=l(o,{},{}),_=b(o,{}),O=x.execute(o),U=l(o);return o.User=p.wrapper(s,[{}]),p.copyProperties(o.User,d),o.User.isAuthenticated=d.isAuthenticated(o),o.User.getSession=d.getSession(o),o.User.setSession=d.setSession(o),o.User.clearSession=d.clearSession(o),o.User.generateAuthtoken=d.generateAuthtoken(o),o.User.anyAuth=d.anyAuth(o),o.Upload=p.wrapper(C,[{}]),p.copyProperties(o.Upload,l),o.UploadCons=p.wrapper(U,[{},{},{}]),p.copyProperties(o.UploadCons,l),o.Role=p.wrapper(c,[{}]),p.copyProperties(o.Role,y),o.Role.getRoleQuery=o.Role.getRoleQuery(o),o.Notification=p.wrapper(A,[{}]),p.copyProperties(o.Notification,m),o.Installation=p.wrapper(w,[{}]),p.copyProperties(o.Installation,v),o.Extension={},o.Extension.execute=p.wrapper(O,[null,null]),o.Analytics={},o.Analytics.Event=function(e,t){if(!e)throw new Error("Uid not found");return t?_(e,t):_(e,{})},p.copyProperties(o.Analytics.Event,b),n(o),r(o),h.build(t.exports,o)}),S=t.exports.consOptions=c.curry(function(e,t,n,r,i,o,u,a,s,c,f){return{host:e,port:t,protocol:n,version:r,adaptor:i,headers:o,persistSession:u,cachePolicy:a,app_info:s,event_properties:c,socketData:f}}),U=t.exports.setAppOptions=function(e,t,n){var r=n.host,i=n.port,o=n.protocol,u=n.version,a=n.adaptor,s=n.headers,c=n.persistSession,f=n.cachePolicy,l=n.app_info,p=n.event_properties,d=n.socketData;switch(e){case"host":r=t;break;case"port":i=t;break;case"protocol":o=t;break;case"version":u=t;break;case"adaptor":a=t;break;case"headers":s=t;break;case"persistSession":c=t;break;case"cachePolicy":f=t;break;case"app_info":l=t;break;case"event_properties":p=t;case"socketData":d=t}return S(r,i,o,u,a,s,c,f,l,p,d)},j=t.exports.getOptions=c.prop("options");h.define("getOptions",1);var k=t.exports.setOptions=c.curry(function(e,t){return O(e,R(t))});h.define("setOptions",2),t.exports.setSession=function(e,t){if(!e.authtoken)throw new Error("Authtoken not found in JSON");return t.setAuthToken(e.authtoken),p.isBrowser()&&i(e,t),g.Events.trigger("user:save-session"),t},h.define("setSession",2),t.exports.clearSession=function(e){return e.removeAuthToken(),p.isBrowser()&&(g.Session.COOKIE===j(e).persistSession?w.delete(s(R(e))):g.Session.LOCAL_STORAGE===j(e).persistSession&&A.delete(s(R(e)))),g.Events.trigger("user:clear-session"),e},h.define("clearSession",1),t.exports.getSession=function(e,t){if(j(t).persistSession===g.Session.COOKIE)return t=t.setAuthToken(w.get(s(R(t)))),o(t);if(e||j(t).persistSession!==g.Session.LOCAL_STORAGE)return o(t);var n=C.defer(),r=A.get(s(R(t)));return r?n.resolve(t.Class(E.APP_USER_CLS).ObjectCons({},{},r,{})):n.reject(),n.promise},h.define("getSession",2,[!1]),t.exports.generateAuthtoken=function(e,n,r,i){if(!c.prop("master_key",t.exports.getHeaders(i)))throw new Error("Master key not found in headers");if(!p.isQueryInstance(e))throw new Error("Query instance inappropriate");if(!p.isBoolean(n))throw new Error("Upsert argument should be a boolean value");if(!p.isObject(r))throw new Error("Update object inappropriate");var o={insert:n,query:e.getQueryObj(),application_user:r},a=p.getAdaptorObj("POST",t.exports.getURL(i)+"/application/users/generate_authtoken",t.exports.getHeaders(i),o,null);return u(i,a)},h.define("generateAuthtoken",4),t.exports.anyAuth=function(e,t,n,r){return r.Extension.execute(e,t,n).then(function(e){var t=r.Class(E.APP_USER_CLS).ObjectCons({},{},e.application_user,{});return r.setSession(t.toJSON()),t})},h.define("anyAuth",4);t.exports.setAuthToken=c.curry(function(e,t){var n=L(t);return n.authtoken=e,t});h.define("setAuthToken",2),t.exports.getAuthToken=function(e){return L(e).authtoken},h.define("getAuthToken",1),t.exports.removeAuthToken=function(e){var t=L(e);return delete t.authtoken,e},h.define("removeAuthToken",1);t.exports.isAuthenticated=function(e){return!!L(e).authtoken};h.define("isAuthenticated",1),t.exports.persistSessionWith=c.curry(function(e,t){var n=j(t),r=U("persistSession",e,n),i=c.mixin(a(r,t.getApiKey(t)),n.headers);return r=U("headers",i,r),k(r,t)}),h.define("persistSessionWith",2);t.exports.validateCachePolicy=function(e){return!!g.CachePolicy[e]};h.define("validateCachePolicy",2),t.exports.setCachePolicy=c.curry(function(e,t){if(t.validateCachePolicy(e)){{var n=j(t),r=U("cachePolicy",e,n);k(r,t)}return k(r,t)}throw new Error("Invalid cache policy")}),h.define("setCachePolicy",2),t.exports.getCachePolicy=function(e){return j(e).cachePolicy},h.define("getCachePolicy",1);var P=t.exports.setHeader=c.curry(function(e,t,n){var r=j(n),i=c.mixin({},r.headers);i[e]=t;var o=U("headers",i,r);return k(o,n)});h.define("setHeader",3);var T=t.exports.removeHeader=c.curry(function(e,t){var n=j(t),r=c.mixin({},n.headers);delete r[e];var i=U("headers",r,n);return k(i,t)});h.define("removeHeader",2),t.exports.setHost=c.curry(function(e,t){var n=j(t),r=U("host",e,n);return k(r,t)}),h.define("setHost",2),t.exports.setPort=c.curry(function(e,t){if("number"!=typeof e)throw new Error("Port number should be number");var n=j(t),r=U("port",e,n);return k(r,t)}),h.define("setPort",2),t.exports.setProtocol=c.curry(function(e,t){if("http"!==e&&"https"!==e)throw new Error("Supported protocols are http and https");var n=j(t),r=U("protocol",e,n);return k(r,t)}),h.define("setProtocol",2),t.exports.setMasterKey=P("master_key"),h.define("setMasterKey",2),t.exports.getMasterKey=function(e){return e.getHeaders().master_key},h.define("getMasterKey",1),t.exports.setTenant=P("tenant_uid"),h.define("setTenant",2),t.exports.removeMasterKey=T("master_key"),h.define("removeMasterKey",2),t.exports.removeTenant=T("tenant_uid"),h.define("removeTenant",1);var L=t.exports.getHeaders=function(e){return e.options.headers};h.define("getHeaders",1);t.exports.getURL=function(e){var t=j(e);return t.protocol+"://"+t.host+":"+t.port+"/"+t.version};h.define("getURL",1),t.exports.getVersion=function(e){return j(e).version},h.define("getVersion",1),t.exports.setVersion=c.curry(function(e,t){var n=j(t),r=U("version",e,n);return k(r,t)}),h.define("setVersion",2),t.exports.setAdaptor=c.curry(function(t,n){var r=j(n),i=c.mixin({},e(t));t===g.Adaptor.SOCKET&&(i.makeCall=i.makeCall(n));var o=U("adaptor",i,r);return n.options=o,n}),h.define("setAdaptor",2),t.exports.fetch=function(e){var n=j(e),r=e.options.adaptor,i=e.getURL()+"/applications/abc",o=p.getAdaptorObj("GET",i,t.exports.getHeaders(e),null,null);return r.makeCall(o).then(function(t){t=t.entity.application;var r={name:t.name,uid:t.uid,app_variables:t.application_variables};return k(U("app_info",r,n),e)})},h.define("fetch",1),t.exports.setEventProperties=c.curry(function(e,t){var n=j(t),r=U("event_properties",e,n);return k(r,t)}),h.define("setEventProperties",2),t.exports.getEventProperties=c.compose(c.prop("event_properties"),j),h.define("getEventProperties",1),t.exports.getName=function(e){return j(e).app_info.name},h.define("getName",1);var R=t.exports.getApiKey=function(e){return j(e).headers.application_api_key};h.define("getApiKey",1),t.exports.getAppVariables=function(e){return j(e).app_info.app_variables},h.define("getAppVariables",1)},{"../config":1,"./adaptors/RestfullAdaptor":3,"./adaptors/SocketAdaptor":4,"./analytics":5,"./built":7,"./class":8,"./constants":9,"./extension":11,"./installation":12,"./notifications":14,"./realtime":27,"./role":18,"./session/cookie":19,"./session/local_storage":20,"./upload":21,"./user":22,"./utilities/instanceMethodBuilder":23,"./utilities/utility":25,ramda:32,when:62}],7:[function(e,t){pluginsHelper={plugins:[],registerPlugin:function(e,t){var n={};n[e]=t,this.plugins.push(n)}};var n=e("ramda"),r=e("../config"),i=e("./acl"),o=e("./utilities/utility"),u=e("./app"),a=e("./location"),s=n.mixin({},r),c=e("./events"),f=e("./presence");s.adaptor=e("./adaptors/RestfullAdaptor");var l="./adaptors/RestfullAdaptor",p="./adaptors/SocketAdaptor",d={COOKIE:"COOKIE",LOCAL_STORAGE:"LOCAL_STORAGE",NONE:"NONE"},h={ONLY_NETWORK:"ONLY_NETWORK",CACHE_ELSE_NETWORK:"CACHE_ELSE_NETWORK",NETWORK_ELSE_CACHE:"NETWORK_ELSE_CACHE",CACHE_THEN_NETWORK:"CACHE_THEN_NETWORK"},g={HTTP:l,SOCKET:p};t.exports.Session=d,t.exports.CachePolicy=h,t.exports.Adaptor=g,t.exports.App=u(s),t.exports.ACL=o.wrapper(i,[{}]),t.exports.Location=o.wrapper(a,["",""]),t.exports.Events=c,t.exports.Presence=o.wrapper(f,[{}]),o.copyProperties(t.exports.ACL,i),o.copyProperties(t.exports.App,u),o.copyProperties(t.exports.Location,a),o.copyProperties(t.exports.Presence,f),Built=t.exports,Built=t.exports},{"../config":1,"./acl":2,"./adaptors/RestfullAdaptor":3,"./app":6,"./events":10,"./location":13,"./presence":16,"./utilities/utility":25,ramda:32}],8:[function(e,t){function n(e){pluginsHelper.plugins.map(function(t){t.realtime&&t.realtime.onClassInstance&&t.realtime.onClassInstance(e)})}function r(e){pluginsHelper.plugins.map(function(t){t.realtime&&t.realtime.onObjectCons&&t.realtime.onObjectCons(e)})}var i=e("ramda"),o=e("./object"),u=e("./user"),a=e("./installation"),s=e("./role"),c=e("./query"),f=e("./built"),l=e("./utilities/utility"),p=e("./utilities/instanceMethodBuilder")(),d="built_io_application_user",h="built_io_application_user_role",g="built_io_installation_data",y={};y[d]=u,y[h]=s,y[g]=a;t.exports=i.curry(function(e,f,y,m){var v={app:e,headers:f,data:y,uid:m},x=l.wrapper(o(e,v,{},{},{}),[{}]),b=l.wrapper(u(e,v,{},{},{}),[{}]),w=l.wrapper(s(e,v,{},{},{}),[{}]),A=l.wrapper(a(e,v,{},{},{}),[{}]),E=l.wrapper(o(e,v),[{},{},{},{}]),C=l.wrapper(u(e,v),[{},{},{},{}]),_=l.wrapper(s(e,v),[{},{},{},{}]),O=l.wrapper(a(e,v),[{},{},{},{}]);switch(m){case d:v.Object=b,v.ObjectCons=C,l.copyProperties(v.Object,u),l.copyProperties(v.ObjectCons,u);break;case h:v.Object=w,v.ObjectCons=_,l.copyProperties(v.Object,s),l.copyProperties(v.ObjectCons,s);break;case g:v.Object=A,v.ObjectCons=O,l.copyProperties(v.Object,a),l.copyProperties(v.ObjectCons,a);break;default:v.Object=x,v.ObjectCons=E,l.copyProperties(v.Object,o),l.copyProperties(v.ObjectCons,o)}var S=c(e,v,{},e.options.cachePolicy);return v.Query=i.wrap(S,function(e,t){return e(t?t:{})}),l.copyProperties(v.Query,c),n(v),r(v),p.build(t.exports,v)});t.exports.getHeaders=function(e){return e.headers},p.define("getHeaders",1);var m=t.exports.getCombinedHeaders=function(e){return{headers:i.mixin(e.headers,f.App.getHeaders(e.app))}};p.define("getCombinedHeaders",1),t.exports.getSchema=function(e){var t=e.app.options.adaptor,n=l.getAdaptorObj("GET",v(e),m(e).headers,null,null);return t.makeCall(n).then(function(e){return e.entity.class.schema})},p.define("getSchema",1);var v=t.exports.getURL=function(e){return f.App.getURL(e.app)+"/classes/"+e.uid};p.define("getURL",1),t.exports.getUid=function(e){return e.uid},p.define("getUid",1),t.exports.isNew=function(e){return!!e.uid},p.define("isNew",1)},{"./built":7,"./installation":12,"./object":15,"./query":17,"./role":18,"./user":22,"./utilities/instanceMethodBuilder":23,"./utilities/utility":25,ramda:32}],9:[function(e,t){t.exports.APP_USER_CLS="built_io_application_user",t.exports.APP_ROLE_CLS="built_io_application_user_role",t.exports.APP_INSTALLATION_CLS="built_io_installation_data"},{}],10:[function(e,t){var n=(e("ramda"),e("./utilities/utility"),e("./utilities/instanceMethodBuilder")(),{});n["http:start"]=[],n["http:end"]=[],n["upload:start"]=[],n["upload:end"]=[],n["user:register"]=[],n["user:activate"]=[],n["user:deactivate"]=[],n["user:login"]=[],n["user:logout"]=[],n["user:save-session"]=[],n["user:clear-session"]=[],n["user:set-current-user"]=[],t.exports.trigger=function(e,t){n[e].map(function(e){e(t)})},t.exports.on=function(e,t){var r=n[e];r.push(t)},t.exports.off=function(e,t){var r=n[e];if(2===arguments.length){var i=r.indexOf(t);i>-1&&r.splice(i,1)}else r=[]}},{"./utilities/instanceMethodBuilder":23,"./utilities/utility":25,ramda:32}],11:[function(e,t){function n(e,t){return t.getURL()+u+"/"+e}function r(e,t){t=t||{};var n=i.mixin(e.getHeaders(),t);return n}var i=e("ramda"),o=e("./utilities/utility"),u="/functions";t.exports.execute=i.curry(function(e,t,u,a){var s=e.options.adaptor,c=n(t,e),f=o.getAdaptorObj("POST",c,r(e,a),u,null);return s.makeCall(f).then(function(e){return i.prop("result",e.entity)},function(e){return i.prop("error",e.entity)})})},{"./utilities/utility":25,ramda:32}],12:[function(e,t){{var n=e("ramda"),r=e("./object"),i=e("./utilities/utility"),o=e("./utilities/instanceMethodBuilder")();t.exports=n.curry(function(e,n,i,u,a,s){var c=r(e,n,i,{},a,s);return c.cons=t.exports,o.build(t.exports,c)})}i.copyProperties(t.exports,r),t.exports.setCurrentTimeZone=function(e){var t=(new Date).getTimezoneOffset(),n=Math.abs(t)<60?(0>t?"+":"-")+"0:"+Math.abs(t):(0>t?"+":"-")+(Math.floor(Math.abs(t)/60)+":"+Math.abs(t)%60);return e.set("timezone",n)},o.define("setCurrentTimeZone",1),t.exports.setDeviceToken=t.exports.set("device_token"),o.define("setDeviceToken",2),t.exports.setDeviceType=t.exports.set("device_type"),o.define("setDeviceType",2),t.exports.subscribeChannels=n.curry(function(e,t){if(!i.isArray(e))throw new Error("Channels should be array");return t.pushValue("subscribed_to_channels",e,t)}),o.define("subscribeChannels",2),t.exports.unsubscribeChannels=n.curry(function(e,t){if(!i.isArray(e))throw new Error("Channels should be array");return t.pullValue("subscribed_to_channels",e,t)}),o.define("unsubscribeChannels",2);var u=t.exports.getDeviceToken=t.exports.get("device_token");o.define("getDeviceToken",1),t.exports.getDeviceType=t.exports.get("device_type"),o.define("getDeviceType",1),t.exports.getSubscribedChannelList=function(e){var t=e.get("subscribed_to_channels");return t?t:e.delta.subscribed_to_channels.PUSH.data},o.define("getSubscribedChannelList",1),t.exports.save=function(e){return e.get("uid")||(e=e.upsert({device_token:u(e)})),r.save(e).then(function(e){return e})},o.define("save",1)},{"./object":15,"./utilities/instanceMethodBuilder":23,"./utilities/utility":25,ramda:32}],13:[function(e,t){function n(e,t){if("number"!=typeof e||"number"!=typeof t)throw new TypeError("Invalid data type");if(-180>e||e>180)throw new Error("Longitutde should be in the range of -180 to 180");if(-90>t||t>90)throw new Error("Latitude should be in the range of -90 to 90")}function r(e,t,n,r,i){var o=Math.PI/180,u=6378.1*i,a=t*o,s=e*o,c=r*o,f=n*o,l=s-f,p=a-c,d=Math.pow(Math.sin(p/2),2)+Math.cos(a)*Math.cos(c)*Math.pow(Math.sin(l/2),2),h=2*Math.atan2(Math.sqrt(d),Math.sqrt(1-d)),g=u*h;return Math.ceil(g)}var i=e("ramda"),o=(e("./utilities/utility"),e("./utilities/instanceMethodBuilder")()),u=e("when"),a=t.exports=function(e,r){var i={};e&&r&&n(e,r),i.longitude=e,i.latitude=r;var u={toJSON:function(){return i},data:i};return o.build(t.exports,u)};t.exports.setLocation=i.curry(function(e,t){return a(e,t)}),o.define("setLocation",3),t.exports.getCurrentLocation=function(){var e=u.defer();return"undefined"!=typeof navigator&&"undefined"!=typeof navigator.geolocation&&navigator.geolocation.getCurrentPosition(function(t){return e.resolve(a(t.coords.longitude,t.coords.latitude))},function(t){e.reject(t)}),e.promise},t.exports.kilometersFrom=function(e,t){var n=e.toJSON(),i=t.toJSON();return r(i.longitude,i.latitude,n.longitude,n.latitude,1)},o.define("kilometersFrom",2),t.exports.metersFrom=function(e,t){var n=e.toJSON(),i=t.toJSON();return r(i.longitude,i.latitude,n.longitude,n.latitude,1e3)},o.define("metersFrom",2),t.exports.milesFrom=function(e,t){var n=e.toJSON(),i=t.toJSON();return r(i.longitude,i.latitude,n.longitude,n.latitude,.621371)},o.define("milesFrom",2)},{"./utilities/instanceMethodBuilder":23,"./utilities/utility":25,ramda:32,when:62}],14:[function(e,t){function n(t){var n=e("./built");return n.App.getURL(t.app)+""+s}function r(e){return o.mixin({},i(e))}function i(e){return e.data}var o=e("ramda"),u=e("./utilities/utility"),a=e("./utilities/instanceMethodBuilder")(),s="/push",c=t.exports=o.curry(function(e,n,r){var i={app:e,headers:n,data:r,toJSON:function(){return r}};return a.build(t.exports,i)}),f=o.curry(function(e,t,n){if("send_at"===e&&t instanceof Date)t=t.toISOString();else if("send_at"===e&&!(t instanceof Date))throw new Error("JavaScript Date object required");var i=r(n);return i[e]=t,c(n.app,n.headers,i)});t.exports.addUsers=f("user_uids"),a.define("addUsers",2),t.exports.atTime=f("send_at"),a.define("atTime",2),t.exports.inLocalTime=f("local_push"),a.define("inLocalTime",2,[!1]),t.exports.setMessage=f("message"),a.define("setMessage",2),t.exports.send=function(e){var t=e.app.options.adaptor,r={push:i(e)},o=u.getAdaptorObj("POST",n(e),getCombinedHeaders(e),r,null);return t.makeCall(o).then(function(){return null},function(){})},a.define("send",1),getCombinedHeaders=function(t){var n=e("./built");return o.mixin(t.headers,n.App.getHeaders(t.app))}},{"./built":7,"./utilities/instanceMethodBuilder":23,"./utilities/utility":25,ramda:32}],15:[function(e,t){function n(e){pluginsHelper.plugins.map(function(t){t.realtime&&t.realtime.onObjectInstance&&t.realtime.onObjectInstance(e)})}function r(e,t){return e.cls.ObjectCons(e.headers,{},t,{})}function i(e,t){var n;return n=e?e.extend({sync:u(t)}):o(t)}function o(e){var t=Backbone.Model.extend({idAttribute:"uid",sync:u(e)});return t}function u(e){return function(t,n,r){2==arguments.length&&(r=n,n=this),r=r||{};var i=l.mixin(n.changed,f(e)),o=e.cls.ObjectCons(e.headers,c(e),x(e),i);return"read"==t?o.fetch().then(function(e){r.success(e.toJSON())},function(e){r.error(e)}):"create"==t||"update"==t?o.save().then(function(e){r.success(e.toJSON())},function(e){r.error(e)}):"delete"==t&&o.delete().then(function(e){r.success(e)},function(e){r.error(e)}),null}}function a(e,t,n,r){if(!p.isNumber(n))throw new Error("Not a number");var i=l.mixin({},f(r)),o=!!f(r)[t];return o?i[t][e]=n:i[t]=p.keyValue(e,n),r.cls.ObjectCons(r.headers,c(r),x(r),i)}function s(e,t,n,r,i){if(""!==r&&!p.isNumber(r))throw new Error("Index value inappropriate");var o=p.keyValue(t,p.keyValue(e,{data:n,index:r})),u=l.mixin(f(i),o);return i.cls.ObjectCons(i.headers,c(i),x(i),u)}function c(e){return e.query}function f(e){return e.delta}{var l=e("ramda"),p=e("./utilities/utility"),d=e("./utilities/instanceMethodBuilder")(),h=e("./built"),g="/objects",y=t.exports=l.curry(function(e,r,i,o,u,a){var s={},c={};s=p.isObject(a)?a:{uid:a},c=p.isEmpty(u)?s:u;var f={app:e,cls:r,headers:i,query:o,data:c,delta:s,toJSON:function(){return c}};return f=d.build(t.exports,f),n(f),f});t.exports.get=l.curry(function(e,t){return x(t)[e]})}d.define("get",2);var m=t.exports.getHeaders=function(e){return e.headers};d.define("getHeaders",1),t.exports.getCombinedHeaders=function(t){var n=e("./class"),r=n.getCombinedHeaders(t.cls),i=l.mixin(r.headers,t.headers);return i},d.define("getCombinedHeaders",1);t.exports.setHeader=l.curry(function(e,t,n){var r=n.headers,i=l.mixin({},r);return i[e]=t,n.cls.ObjectCons(i,c(n),x(n),f(n))});d.define("setHeader",3),t.exports.removeHeader=l.curry(function(e,t){var n=l.mixin({},t.headers);return delete n[e],t.cls.ObjectCons(n,c(t),x(t),f(t))}),d.define("removeHeader",2);var v=t.exports.getURL=function(t){var n=e("./class");return t.isNew()?n.getURL(t.cls)+g+"/"+t.getUid():n.getURL(t.cls)+g};d.define("getURL",1),t.exports.decrement=l.curry(function(e,t,n){return a("SUB",e,t,n)}),d.define("decrement",3),t.exports.increment=l.curry(function(e,t,n){return a("ADD",e,t,n)}),d.define("increment",3),t.exports.divide=l.curry(function(e,t,n){return a("DIV",e,t,n)}),d.define("divide",3),t.exports.multiply=l.curry(function(e,t,n){return a("MUL",e,t,n)}),d.define("multiply",3);var x=t.exports.getData=function(e){return e.data};d.define("getData",1),t.exports.assign=l.curry(function(e,t){var n=l.mixin(x(t),e),r=l.mixin(f(t),e);return t.cls.ObjectCons(t.headers,c(t),n,r)}),d.define("assign",2);var b=t.exports.set=l.curry(function(e,t,n){var r=l.mixin({},x(n)),i=l.mixin({},f(n));return r[e]=t,i[e]=t,n.cls.ObjectCons(n.headers,c(n),r,i)});d.define("set",3),d.define("setTags",2);t.exports.getUid=function(e){return f(e).uid||x(e).uid};d.define("getUid",1),t.exports.setUid=b("uid"),d.define("setUid",2),t.exports.setTags=l.curry(function(e,t){var n=f(t);return n.tags=e,t.cls.ObjectCons(t.headers,c(t),x(t),n)}),d.define("setTags",2),t.exports.setLocation=l.curry(function(e,t){var n=l.mixin({},f(t)),r=e.toJSON();return n.__loc=[r.longitude,r.latitude],t.cls.ObjectCons(t.headers,c(t),x(t),n)}),d.define("setLocation",2),t.exports.getLocation=l.curry(function(e){var t=h.Location,n=e.get("__loc"),r=t(n[0],n[1]);return r}),d.define("getLocation",1),t.exports.isNew=function(e){return!!e.getUid()},d.define("isNew",1),t.exports.pushValueAtIndex=l.curry(function(e,t,n,r){return s("PUSH",e,t,n,r)}),d.define("pushValueAtIndex",4),t.exports.pushValue=l.curry(function(e,t,n){return s("PUSH",e,t,"",n)}),d.define("pushValue",3),t.exports.pullValue=l.curry(function(e,t,n){return s("PULL",e,t,"",n)}),d.define("pullValue",3),t.exports.pullValueAtIndex=l.curry(function(e,t,n){return s("PULL",e,"",t,n)}),d.define("pullValueAtIndex",3),t.exports.saveAsDraft=function(e){var n=l.mixin({},f(e));n.published=!1;var r=e.cls.ObjectCons(e.headers,c(e),x(e),n);return t.exports.save(r)},d.define("saveAsDraft",1),t.exports.upsert=l.curry(function(e,t){var n=l.mixin({},f(t));return n.UPSERT=e,t.cls.ObjectCons(t.headers,c(t),x(t),n)}),d.define("upsert",2),t.exports.has=l.curry(function(e,t){return t.data.hasOwnProperty(e)
}),d.define("has",2),t.exports.setACL=l.curry(function(e,t){var n=l.mixin({},f(t));return n.ACL=e.toJSON(),t.cls.ObjectCons(t.headers,c(t),x(t),n)}),d.define("setACL",2),t.exports.setReference=l.curry(function(e,t,n){var r=l.mixin({},f(n)),i=t.slice(0);if(t[0]&&t[0].app)for(var o=0;o<t.length;o++){if(!t[o].getUid())throw new Error("Uid not found");i.push(f(t[o]).uid)}return r[e]=i,n.cls.ObjectCons(n.headers,c(n),x(n),r)}),d.define("setReference",3),t.exports.setReferenceWhere=l.curry(function(e,t,n){if(!n.isNew())throw new Error("Uid not found");var r=l.mixin({},f(n));return r[e]={where:t},n.cls.ObjectCons(n.headers,c(n),x(n),r)}),d.define("setReferenceWhere",3),t.exports.upsertForReference=l.curry(function(e,t,n,r){if(!r.isNew())throw new Error("Uid not found");var i=l.mixin(n,f(r));return i[e]={UPSERT:t},r.cls.ObjectCons(r.headers,c(r),x(r),i)}),d.define("upsertForReference",4),t.exports.timeless=function(e){var t=m(e);return t.timeless=!0,e.cls.ObjectCons(t,c(e),x(e),f(e))},d.define("timeless",1);var w=t.exports.addQuery=l.curry(function(e,t,n){var r=l.mixin({},c(n));return r[e]=t,n.cls.ObjectCons(n.headers,r,x(n),f(n))});d.define("addQuery",3),t.exports.includeOwner=w("include_owner",!0),d.define("includeOwner",1),t.exports.save=function(e){var n,i={object:f(e)},o=e.app.options.adaptor;n=e.isNew()?"PUT":"POST";var u=c(e);0===Object.keys(u).length&&(u=null);var a=p.getAdaptorObj(n,v(e),t.exports.getCombinedHeaders(e),i,u);return o.makeCall(a).then(function(t){if(t.entity.count){var n=[];return n.push(t.entity.count),n.push(r(e,t.entity.object)),n}return r(e,t.entity.object)})},d.define("save",1),t.exports.fetch=function(e){var n=e.app.options.adaptor,r=c(e);if(0===Object.keys(r).length&&(r=null),!e.isNew())throw new Error("Uid not found");var i=p.getAdaptorObj("GET",t.exports.getURL(e),t.exports.getCombinedHeaders(e),null,r);return n.makeCall(i).then(function(t){return e.cls.ObjectCons(m(e),c(e),t.entity.object,f(e))})},d.define("fetch",1),t.exports.delete=function(e){var n=e.app.options.adaptor;if(!e.isNew())throw new Error("Uid not found");var r=p.getAdaptorObj("DELETE",t.exports.getURL(e),t.exports.getCombinedHeaders(e),null,null);return n.makeCall(r).then(function(){return null})},d.define("delete",1),t.exports.toBackboneModel=function(e,t){if(!p.backboneExist())throw new Error("BACKBONE not included");var n=i(e,t);return p.isObject(t)?new n(t.toJSON()):void 0},d.define("toBackboneModel",2,[null]),y.BackboneCollection=function(e){var t=this;if(p.backboneExist()){if(e.objects){var n=Backbone.Collection.extend({sync:function(n,r,o){2==arguments.length&&(o=r,r=this),o=o||{};var u=this;if("read"===n&&t){var a=t.cls.Query();a.exec().then(function(t){for(var n=0;n<t.length;n++)if("object"==typeof t[n]){var r=i(e.model,t[n]);u.add(new r(t[n].toJSON()))}o.success(u.models)},function(e){o.error(e)})}return null}});n=new n;for(var r=0;r<e.objects.length;r++)if("object"==typeof e.objects[r]){var o=i(e.model,e.objects[r]);n.add(new o(e.objects[r].toJSON()))}return n}if(e.query){var n=Backbone.Collection.extend({sync:function(t,n,r){2==arguments.length&&(r=n,n=this),r=r||{};var o=this;if("read"==t){var u=e.query;u.exec().then(function(t){for(var n=0;n<t.length;n++){var u=i(e.model,t[n]);o.add(new u(t[n].toJSON()))}r.success(o.models)},function(e){r.error(e)})}return null}});return new n}new Error("Config argument not set properly")}}},{"./built":7,"./class":8,"./utilities/instanceMethodBuilder":23,"./utilities/utility":25,ramda:32}],16:[function(e,t){function n(e){return i.mixin({},s(e))}function r(e){return i.mixin({},s(e).presence)}var i=e("ramda"),o=e("./utilities/utility"),u=e("./utilities/instanceMethodBuilder")(),a=e("when"),s=i.prop("data"),c=t.exports=i.curry(function(e,n){var r={toJSON:function(){return n},data:n,app:e};return u.build(t.exports,r)}),f=t.exports.set=i.curry(function(e,t,i){var o=n(i),u=r(i);return u[e]=t,o.presence=u,c(i.app,o)});t.exports.setState=f("state"),u.define("setState",2),t.exports.setPublic=f("public"),u.define("setPublic",2),t.exports.enable=f("enabled"),u.define("enable",2),t.exports.setWhiteList=i.curry(function(e,t){if(!o.isArray(e))throw new Error("Whitelist must be array");return f("whitelist",e,t)}),u.define("setWhiteList",2),t.exports.save=function(e){return p("setPresence",i.prop("presence",s(e)),e)},u.define("save",1);var l=t.exports.get=i.curry(function(e,t){return i.prop(e,i.prop("presence",s(t)))});t.exports.getRequests=l("requests"),u.define("getRequests",1),t.exports.getState=l("state"),u.define("getState",1),t.exports.isPublic=l("public"),u.define("isPublic",1),t.exports.isEnabled=l("enabled"),u.define("isEnabled",1),t.exports.getApplicationUser=function(e){return i.prop("application_user",s(e))},u.define("getApplicationUser",1);var p=i.curry(function(e,t,n){function r(n){n.emit(e,t,function(e,t){e&&o.reject(e),!e&&t&&o.resolve(c(i,t))})}var i=n.app,o=(i.getSocket(),a.defer());return i.isSocketConnected()?i.isSocketAuthStarted()?i.getAdhocOperations().push(r):r(i.getSocket()):i.getAdhocOperations().push(r),o.promise})},{"./utilities/instanceMethodBuilder":23,"./utilities/utility":25,ramda:32,when:62}],17:[function(e,t){function n(e,t){return p.isArray(e)?t(e):r(e,t)}function r(e,t){var n={};return e.created_at&&(n.created=t(e.created_at)),e.deleted_at&&(n.deleted=t(e.deleted_at)),e.updated_at&&(n.updated=t(e.updated_at)),n}function i(e){return e}function o(e){return{conditions:b(e),headers:e.headers}}function u(e){return h(JSON.stringify(e))}function a(e){var t=g.defer();if(p.isLocalStroageAvaliable()){var n=localStorage.getItem(e);n?t.resolve(JSON.parse(n)):t.reject(null)}else t.reject();return t.promise}function s(e){var n=e.app.options.adaptor,r=l.mixin({},b(e));r._method="GET";var i=p.getAdaptorObj("POST",c(e),t.exports.getCombinedHeaders(e),r,null);return n.makeCall(i).then(function(e){return e.entity})}function c(t){var n=e("./class");return n.getURL(t.cls)+"/objects"}function f(){for(var e=null,t={},n=0;n<arguments.length;n++){var r=arguments[n];n%2===0?e=r:t[e]=r}return t}var l=e("ramda"),p=e("./utilities/utility"),d=(e("./object"),e("./utilities/instanceMethodBuilder")()),h=e("blueimp-md5").md5,g=e("when"),y=e("./built"),m="BACKBONE_TRANSFORM",v="JSON_TRANSFORM",x=t.exports=l.curry(function(e,n,r,i,o){var u={app:e,cls:n,headers:r,cachePolicy:i,data:o||{}};return d.build(t.exports,u)}),b=t.exports.getConditions=l.prop("data");d.define("getConditions",1);var w=t.exports.getQueryObj=l.compose(l.prop("query"),b);d.define("getQueryObj",1),t.exports.getTransform=l.compose(l.prop("transform"),l.prop("data")),d.define("getTransform",1),t.exports.toJSON=function(e){var t=l.mixin({},b(e));return t.transform=v,x(e.app,e.cls,e.headers,e.cachePolicy,t)},d.define("toJSON",1),t.exports.toBackbone=function(e){var t=l.mixin({},b(e));return t.transform=m,x(e.app,e.cls,e.headers,e.cachePolicy,t)},d.define("toBackbone",1);var A=t.exports.setHeader=l.curry(function(e,t,n){var r=n.headers,i=l.mixin({},r);return i[e]=t,x(n.app,n.cls,i,n.cachePolicy,b(n))});d.define("setHeader",3);var E=t.exports.removeHeader=l.curry(function(e,t){var n=t.header,r=l.mixin({},n);return delete r[e],x(t.app,t.cls,r,t.cachePolicy,b(t))});d.define("removeHeader",2),t.exports.setMasterKey=A("master_key"),d.define("setMasterKey",2),t.exports.removeMasterKey=E("master_key"),d.define("removeMasterKey",1),t.exports.getHeaders=function(e){return e.headers},d.define("getHeaders",1),t.exports.getCombinedHeaders=function(t){var n=e("./class"),r=n.getCombinedHeaders(t.cls),i=l.mixin(r.headers,t.headers);return i},d.define("getCombinedHeaders",1);var C=l.curry(function(e,t,n){var r=l.mixin({},b(n)),i=l.mixin({},w(n));return i[t]={$exists:e},r.query=i,x(n.app,n.cls,n.headers,n.cachePolicy,r)});t.exports.exists=C(!0),d.define("exists",2),t.exports.doesNotExists=C(!1),d.define("doesNotExists",2);var _=l.curry(function(e,t,n,r,i){var o=l.mixin({},b(i)),u=l.mixin({},w(i));return u[t]=f(e,{query:b(n).query,class_uid:n.cls.uid,key:r}),o.query=u,x(i.app,i.cls,i.headers,i.cachePolicy,o)});t.exports.select=_("$select"),d.define("select",4),t.exports.dontSelect=_("$dont_select"),d.define("dontSelect",4),t.exports.where=l.curry(function(e,t,n){var r=l.mixin({},b(n)),i=l.mixin({},w(n));return i[e]=t,r.query=i,x(n.app,n.cls,n.headers,n.cachePolicy,r)}),d.define("where",3);var O=t.exports.addQueryParams=l.curry(function(e,t,n){var r=l.mixin({},b(n));return r[e]=t,x(n.app,n.cls,n.headers,n.cachePolicy,r)});d.define("addQueryParams",3),t.exports.includeCount=O("include_count",!0),d.define("includeCount",1),t.exports.count=O("count",!0),d.define("count",1),t.exports.include=O("include"),d.define("include",2),t.exports.skip=O("skip"),d.define("skip",2),t.exports.limit=O("limit"),d.define("limit",2),t.exports.includeOwner=O("include_owner",!0),d.define("includeOwner",1),t.exports.includeSchema=O("include_schema",!0),d.define("includeSchema",1),t.exports.includeDrafts=O("include_unpublished",!0),d.define("includeDrafts",1),t.exports.onlyDrafts=function(e){var t=e.includeDrafts(),n=l.mixin({},b(t)),r=l.mixin({},w(t));return r.published=!1,n.query=r,x(e.app,e.cls,e.headers,e.cachePolicy,n)},d.define("onlyDrafts",1);var S=l.curry(function(e,t,n,r){var i=l.mixin({},b(r)),o=l.mixin({},w(r));return o[t]=f(e,w(n)),i.query=o,x(r.app,r.cls,r.headers,r.cachePolicy,i)});t.exports.inQuery=S("$in_query"),d.define("inQuery",3),t.exports.notInQuery=S("$nin_query"),d.define("notInQuery",3),t.exports.matches=l.curry(function(e,t,n,r){var i=l.mixin({},b(r)),o=l.mixin({},w(r));return o[e]={$regex:t,$options:n},i.query=o,x(r.app,r.cls,r.headers,r.cachePolicy,i)}),d.define("matches",4,[null]),t.exports.withinLocation=l.curry(function(e,t){var n=l.mixin({},b(t)),r=l.mixin({},w(t));if(!p.isArray(e))throw new Error("Locations should be a Array");if(e.length<3)throw new Error("Minimum 3 locations or objectUids required");var i=e.map(function(e){if(e.data)return[e.toJSON().longitude,e.toJSON.latitude];if(p.isString(e))return{object:e};throw new Error("Invalid parameter"+e)});return r.$within=i,n.query=r,x(t.app,t.cls,t.headers,t.cachePolicy,n)}),t.exports.containedIn=l.curry(function(e,t,n){var r=l.mixin({},b(n)),i=l.mixin({},w(n));return i[e]={$in:t},r.query=i,x(n.app,n.cls,n.headers,n.cachePolicy,r)}),d.define("containedIn",3),t.exports.notContainedIn=l.curry(function(e,t,n){var r=l.mixin({},b(n)),i=l.mixin({},w(n));return i[e]={$nin:t},r.query=i,x(n.app,n.cls,n.headers,n.cachePolicy,r)}),d.define("notContainedIn",3),t.exports.ascending=O("asc"),d.define("ascending",2),t.exports.descending=O("desc"),d.define("descending",2),t.exports.beforeUid=O("before_uid"),d.define("beforeUid",2),t.exports.afterUid=O("after_uid"),d.define("afterUid",2);var U=l.curry(function(e,t,n){var r=l.mixin({},b(n)),i=l.mixin({},w(n));i[e]=[];for(var o=0;o<t.length;o++){var u=b(t[o]).query;i[e].push(u)}return r.query=i,x(n.app,n.cls,n.headers,n.cachePolicy,r)});t.exports.and=U("$and"),d.define("and",2),t.exports.or=U("$or"),d.define("or",2);var j=l.curry(function(e,t,n,r){var i=l.mixin({},b(r)),o=l.mixin({},w(r));return o[t]=f(e,n),i.query=o,x(r.app,r.cls,r.headers,r.cachePolicy,i)});t.exports.greaterThan=j("$gt"),d.define("greaterThan",3),t.exports.greaterThanOrEqualTo=j("$gte"),d.define("greaterThanOrEqualTo",3),t.exports.lessThan=j("$lt"),d.define("lessThan",3),t.exports.lessThanOrEqualTo=j("$lte"),d.define("lessThanOrEqualTo",3),t.exports.notEqualTo=j("$ne"),d.define("notEqualTo",3),t.exports.setCachePolicy=l.curry(function(e,t){if(t.app.validateCachePolicy(e))return x(t.app,t.cls,t.headers,e,b(t));throw new Error("Invalid cache policy")}),d.define("setCachePolicy",2);{var k=l.curry(function(e,t){return p.isLocalStroageAvaliable()&&localStorage.setItem(e,JSON.stringify(t)),t}),P=l.curry(function(e,t,n){t instanceof Date&&(t=t.toISOString());var r=l.mixin({},b(n)),i=l.mixin({},r.delta);return i[e]=t,r.delta=i,x(n.app,n.cls,n.headers,n.cachePolicy,r)});t.exports.deltaCreatedFrom=P("created_at")}d.define("deltaCreatedFrom",2);t.exports.deltaUpdatedFrom=P("updated_at");d.define("deltaUpdatedFrom",2);t.exports.deltaDeletedFrom=P("deleted_at");d.define("deltaDeletedFrom",2),t.exports.deltaAll=P("ALL"),d.define("deltaAll",2);var T=l.curry(function(e,t){var r=e.cls.ObjectCons,o=Object.keys(t),u=t.objects,a=e.getTransform(),s=L(r);switch(a){case m:s=R(r);break;case v:s=i}if(o.length>1){var c=[];return c.push(n(u,s)),t.schema&&c.push(t.schema),t.count&&c.push(t.count),c}return p.isNumber(u)?u:n(u,s)}),L=l.curry(function(e,t){return t.map(function(t){return e({},{},t,{})})}),R=l.curry(function(e,t){var n=L(e,t),r=e.BackboneCollection({objects:n});return r});t.exports.exec=function(e){var t=u(o(e)),n=k(t),r=T(e);switch(e.cachePolicy){case y.CachePolicy.ONLY_NETWORK:return s(e).then(r);case y.CachePolicy.CACHE_ELSE_NETWORK:return a(t).then(r).catch(function(){return s(e).then(n).then(r)});case y.CachePolicy.NETWORK_ELSE_CACHE:return s(e).then(r).catch(function(e){return a(t).then(r).catch(function(){throw e})});case y.CachePolicy.CACHE_THEN_NETWORK:var i=function(){};return{cache:a(t).then(r).then(function(e){return i(null,e),e}),network:s(e).then(r).then(function(e){return i(null,e),e}).catch(function(e){i(e,null)}),both:function(e){i=e}}}},d.define("exec",1),t.exports.nearLocation=l.curry(function(e,t,n){t=t||1e3;var r=l.mixin({},b(n)),i=l.mixin({},w(n));if(e&&e.data&&p.isNumber(t)){var o=e.toJSON();i.$near={coords:[o.longitude,o.latitude],radius:t}}else{if(!p.isString(e)||!p.isNumber(t))throw new Error("Invalid parameters");i.$near={coords:{object:e},radius:t}}return r.query=i,x(n.app,n.cls,n.headers,n.cachePolicy,r)}),d.define("nearLocation",3,[null]);var I=l.curry(function(e,t,n,r){var i=l.mixin({},b(r));return i[e]=f(t,n),x(r.app,r.cls,r.headers,r.cachePolicy,i)});t.exports.except=I("except","BASE"),d.define("except",2),t.exports.exceptReference=I("except"),d.define("exceptReference",3),t.exports.only=I("only","BASE"),d.define("only",2),t.exports.onlyReference=I("only"),d.define("onlyReference",3)},{"./built":7,"./class":8,"./object":15,"./utilities/instanceMethodBuilder":23,"./utilities/utility":25,"blueimp-md5":26,ramda:32,when:62}],18:[function(e,t){function n(e){return a.mixin({},i(e))}function r(e){return a.mixin({},o(e))}function i(e){return e.delta}function o(e){return e.data}function u(e,t){var n;if(o(t)[e])var n=[].concat(o(t)[e]);else n=[];return n}{var a=e("ramda"),s=e("./utilities/utility"),c=e("./utilities/instanceMethodBuilder")(),f=e("./object"),l=e("./constants");t.exports=a.curry(function(e,n,r,i,o,u){var a=f(e,n,r,{},o,u);return c.build(t.exports,a)})}s.copyProperties(t.exports,f),t.exports.getRoleQuery=function(e){return function(){return e.Class(l.APP_ROLE_CLS).Query()}};var p=a.curry(function(e,t,i){var o=n(i),a=r(i),s=u(e,i);return s.push(t),o[e]=s,a[e]=s,i.cls.ObjectCons(i.getHeaders(),{},a,o)});t.exports.addRole=p("roles"),c.define("addRole",2),t.exports.addUser=p("users"),c.define("addUser",2),t.exports.getName=t.exports.get("name"),c.define("getName",1),t.exports.getRoles=t.exports.get("roles"),c.define("getRoles",1),t.exports.getRoleUid=t.exports.get("uid"),c.define("getRoleUid",1),t.exports.getUsers=t.exports.get("users"),c.define("getUsers",1),t.exports.setName=t.exports.set("name"),c.define("setName",2),t.exports.setRoleUid=t.exports.set("uid"),c.define("setRoleUid",2);var d=a.curry(function(e,t,n){return a.contains(t,o(n)[e])});t.exports.hasRole=d("roles"),c.define("hasRole",2),t.exports.hasUser=d("users"),c.define("hasUser",2);var h=a.curry(function(e,t,i){var o=n(i),a=r(i),s=u(e,i),c=s.indexOf(t);return c>-1&&s.splice(c,1),o[e]=s,a[e]=s,i.cls.ObjectCons(i.getHeaders(),{},a,o)});t.exports.removeRole=h("roles"),c.define("removeRole",2),t.exports.removeUser=h("users"),c.define("removeUser",2)},{"./constants":9,"./object":15,"./utilities/instanceMethodBuilder":23,"./utilities/utility":25,ramda:32}],19:[function(e,t){var n=t.exports.set=function(e,t){document.cookie=e+"="+t};t.exports.delete=function(e){n(e,"")},t.exports.get=function(e){for(var t=e+"=",n=document.cookie.split(";"),r=0;r<n.length;r++){for(var i=n[r];" "==i.charAt(0);)i=i.substring(1);if(-1!=i.indexOf(t))return i.substring(t.length,i.length)}return""}},{}],20:[function(e,t){t.exports.set=function(e,t){t=JSON.stringify(t),window.localStorage.setItem(e,t)},t.exports.delete=function(e){window.localStorage.removeItem(e)},t.exports.get=function(e){return window.localStorage.getItem(e)?JSON.parse(window.localStorage.getItem(e)):void 0}},{}],21:[function(e,t){function n(e){pluginsHelper.plugins.map(function(t){t.realtime&&t.realtime.onUploadInstance&&t.realtime.onUploadInstance(e)})}function r(e){return e.data}function i(e){return e.params}function i(e){return e.params}function o(t){e("./built");return S(t)?"PUT":"POST"}function u(e){if(U(e)instanceof FormData)return U(e);if("undefined"!=typeof File&&U(e)instanceof File){var t=new FormData;return t.append("upload[upload]",U(e)),t}if(!U(e)||1!==U(e).nodeType&&9!==U(e).nodeType)throw new Error("HTML input file element or FormData or File required");var t=new FormData;if("file"==U(e).getAttribute("type"))return t.append("upload[upload]",U(e).files[0]),t;throw new Error("input file element required")}function a(e){if("https://api.built.io"===e.origin){var t=e.data?e.data:e.message;t=JSON.parse(t);var n=t.postmessage_payload;_[n](t),delete _[n],c(n)}}function s(){window?window.addEventListener("message",a,!1):window.attachEvent("onmessage",a)}function c(e){var t=document.getElementById("builtUploadForm"+e),n=document.getElementById("builtIFrame"+e);t.parentNode.removeChild(t),n.parentNode.removeChild(n)}function f(e){var n=e.app.options.adaptor,r={},a=u(e);return r.formData=a,r.headers=t.exports.getCombinedHeaders(e),r.url=t.exports.getURL(e),a.append("PARAM",JSON.stringify({upload:i(e)})),a.append("_method",o(e)),n.makeXMLHttpRequest(r).then(function(t){var n=JSON.parse(t);return O(e.app,e.headers,n.upload,n.upload.uid)})}function l(e){var n=p(e),r=g.readFileSync(U(e));return b.postData({PARAM:JSON.stringify({upload:i(e)})},[{type:h.lookup(U(e)),keyname:"upload[upload]",valuename:C.basename(U(e)),data:r}],n,t.exports.getCombinedHeaders(e)).then(function(t){var n=JSON.parse(t);return O(e.app,e.headers,n.upload,n.upload.uid)})}function p(e){var n=t.exports.getURL(e),r="",i="",o="POST";e.getUid()&&(o="PUT"),"http://"===n.substr(0,7)?r=n.split("http://")[1].split(":")[0]:"https://"===n.substr(0,8)&&(r=n.split("https://")[1].split(":")[0]);for(var u=n.split("https://")[1].split(":")[1].split("/"),a=1;a<u.length;a++)i+="/"+u[a];return{host:r,path:i,method:o,encoding:"utf8"}}function d(e){var t=U(e).cloneNode();U(e).style.display="none",U(e).parentNode.insertBefore(t,U(e));var n=Math.floor(1e3*Math.random()),r=x.defer();return _[n]=function(t){t.upload?(w.trigger("upload:end"),r.resolve(O(e.app,e.headers,t.upload,t.upload.uid))):r.reject(t)},r.promise}var h,g,y=e("ramda"),m=e("./utilities/utility"),v=e("./utilities/instanceMethodBuilder")(),x=e("when"),v=e("./utilities/instanceMethodBuilder")(),b=e("./utilities/uploadHelper"),w=e("./events"),A=e("./node"),E=A.https,C=A.path;m.isBrowser()||(h=A.mime,g=A.fs);var _={};m.isBrowser()&&s();var O=t.exports=y.curry(function(e,r,i,o){var u={};"string"==typeof o?u.uid=o:u=o;var a={app:e,headers:r,params:i,data:u,toJSON:function(){return i}};return n(a),v.build(t.exports,a)});t.exports.download=function(e){if(!e.getDownloadLink())throw new Error("Object cannot be downloaded as download link not found");if(!m.isBrowser()){var t=x.defer();return E.get(e.getDownloadLink(),function(e){t.resolve(e)}),t.promise}window.open(e.getDownloadLink())},v.define("download",1),t.exports.isNew=function(e){return!!e.data.uid},v.define("isNew",1),t.exports.setUid=y.curry(function(e,t){var n=y.mixin({},r(t));return n.uid=e,O(t.app,t.headers,t.params,n)}),v.define("setUid",2);var S=t.exports.getUid=function(e){return r(e).uid};v.define("getUid",1);var U=t.exports.getUploadPayload=function(e){return r(e).file};v.define("getUploadPayload",1),t.exports.setFile=y.curry(function(e,t){var n=y.mixin({},r(t));if(m.isBrowser()){if("undefined"!=typeof e[0]&&(n.file=e[0]),!(e&&(1===e.nodeType||9===e.nodeType)||"undefined"!=typeof FormData&&e instanceof FormData||"undefined"!=typeof File&&e instanceof File))throw new Error("The parameter is not valid or not supported by the platform. Please pass an html input elment.");n.file=e}else if(e.indexOf("://")>=0)n.file=e;else if(g.existsSync(e)){if(!g.statSync(e).isFile())throw new Error("invalid file path: "+e);n.file=e}return O(t.app,t.headers,t.params,n)}),v.define("setFile",2),t.exports.unsetFile=function(e){var t=y.mixin({},r(e));if(m.isBrowser()){var n=U(e);if(!(n&&(1===n.nodeType||9===n.nodeType)||n instanceof FormData||n instanceof File))throw new Error("No upload found")}return S(e)?O(e.app,e.headers,e.params,data.uid):(t.file=null,O(e.app,e.headers,e.params,t))},v.define("unsetFile",1),t.exports.save=function(e){e.app.options.adaptor;if(!U(e))throw new Error("No upload found");if(!m.isBrowser())return l(e);if(m.supportsFormData())return f(e);if("file"!=U(e).getAttribute("type"))throw new Error("Input file element required for upload");d(e)},v.define("save",1),t.exports.delete=function(e){var n=e.app.options.adaptor;if(!S(e))throw new Error("Upload object needs to be associated with a uid");var r=m.getAdaptorObj("DELETE",t.exports.getURL(e),t.exports.getCombinedHeaders(e),null,null);return n.makeCall(r).then(function(){return null})},v.define("delete",1),t.exports.fetch=function(e){var n=e.app.options.adaptor;if(!S(e))throw new Error("Upload object needs to be associated with a uid");var r=m.getAdaptorObj("GET",t.exports.getURL(e),t.exports.getCombinedHeaders(e),null,null);return n.makeCall(r).then(function(n){return O(e.app,t.exports.getCombinedHeaders(e),n.entity.upload,n.entity.upload.uid)})},v.define("fetch",1);var j=y.curry(function(e,t,n){var r=y.mixin({},i(n));return r[e]=t,O(n.app,n.headers,r,n.data)});t.exports.setACL=y.curry(function(e,t){var n=y.mixin({},i(t));return n.ACL=e.toJSON(),O(t.app,t.headers,n,t.data)}),v.define("setACL",2),t.exports.getACL=function(e){return i(e).ACL},v.define("getACL",1),t.exports.setTags=j("tags"),v.define("setTags",2);var k=y.curry(function(e,t){return i(t)[e]});t.exports.getDownloadLink=k("url"),v.define("getDownloadLink",1),t.exports.getTags=k("tags"),v.define("getTags",1),t.exports.getContentType=k("content_type"),v.define("getContentType",1),t.exports.getFileSize=k("file_size"),v.define("getFileSize",1),t.exports.getFileName=k("filename"),v.define("getFileName",1),t.exports.getHeaders=function(e){return e.headers},v.define("getHeaders",1),t.exports.getURL=function(t){var n=e("./built");return S(t)?n.App.getURL(t.app)+"/uploads/"+S(t):n.App.getURL(t.app)+"/uploads"},v.define("getURL",1),t.exports.getCombinedHeaders=function(t){var n=e("./built");return y.mixin(t.headers,n.App.getHeaders(t.app))},v.define("getHeaders",1)},{"./built":7,"./events":10,"./node":27,"./utilities/instanceMethodBuilder":23,"./utilities/uploadHelper":24,"./utilities/utility":25,ramda:32,when:62}],22:[function(e,t){function n(e){pluginsHelper.plugins.map(function(t){t.realtime&&t.realtime.onUserInstance&&t.realtime.onUserInstance(e)})}function r(e){return function(t){return function(){return t[e].apply(t,arguments)}}}function i(e,n,r,i){var o=a(i)+"/retrieve_user_uid",u=l("auth_data",l(e,l(n,r))),s={application_user:d.assign(u,i).data},c=i.app.options.adaptor,f=h.getAdaptorObj("POST",o,t.exports.getCombinedHeaders(i),s,null);return c.makeCall(f).then(function(e){return i.cls.ObjectCons(t.exports.getHeaders(i),{},{},e.entity.uid)})}function o(e,t){var n={application_user:d.assign(e,t).data},r=a(t);return u("POST",r,n,t).then(function(e){return m.trigger("user:login"),e.app.setSession(e.toJSON()),e})}function u(e,n,r,i){var o=i.app.options.adaptor,u=h.getAdaptorObj(e,n,t.exports.getCombinedHeaders(i),r,null);return o.makeCall(u).then(function(e){return i.cls.ObjectCons(t.exports.getHeaders(i),{},e.entity.application_user,{})})}function a(t){var n,r=e("./built"),i=t.app;return n=c(t).uid?r.App.getURL(i)+v+"/"+c(t).uid:r.App.getURL(i)+v}function s(e){return e.app.getURL()+v+"/logout"}function c(e){return e.data}function f(e){return e.delta}function l(e,t){var n={};return n[e]=t,n}{var p=e("ramda"),d=e("./object"),h=e("./utilities/utility"),g=e("when"),y=e("./utilities/instanceMethodBuilder")(),m=(e("./session/cookie"),e("./events")),v="/application/users";t.exports=p.curry(function(e,r,i,o,u,a){var s=d(e,r,i,{},u,a);return s=y.build(t.exports,s),n(s),s})}h.copyProperties(t.exports,d),t.exports.login=p.curry(function(e,t,n){var r={email:e,password:t},i={application_user:d.assign(r,n).data},o=n.app.getURL()+v+"/login";return u("POST",o,i,n).then(function(e){return m.trigger("user:login"),e.app.setSession(e.toJSON()),e})}),y.define("login",3),t.exports.logout=function(e){if(!e.app.isAuthenticated())throw new Error("User not logged in");var n=s(e),r=e.app.options.adaptor,i=h.getAdaptorObj("DELETE",n,t.exports.getCombinedHeaders(e),null,null);return r.makeCall(i).then(function(){return m.trigger("user:logout"),e.app.clearSession(),null})},y.define("logout",1),t.exports.isAuthenticated=r("isAuthenticated"),t.exports.getSession=r("getSession"),t.exports.setSession=r("setSession"),t.exports.clearSession=r("clearSession"),t.exports.generateAuthtoken=r("generateAuthtoken"),t.exports.anyAuth=r("anyAuth"),t.exports.activate=p.curry(function(e,n){if(!f(n).uid)throw new Error("Uid not found");var r=a(n)+"/activate/"+e,i=n.app.options.adaptor,o=h.getAdaptorObj("GET",r,t.exports.getCombinedHeaders(n),null,null);return i.makeCall(o).then(function(e){return m.trigger("user:activate",e.entity),null})}),y.define("activate",2),t.exports.deactivate=p.curry(function(e){if(!e.getHeaders().authtoken)throw new Error("Authentication token not found in headers");if(!c(e).uid)throw new Error("Uid not found");var n=a(e),r=e.app.options.adaptor,i=h.getAdaptorObj("DELETE",n,t.exports.getCombinedHeaders(e),null,null);return r.makeCall(i).then(function(e){return m.trigger("user:deactivate",e.entity),null})}),y.define("deactivate",1),t.exports.fetchUserUidByEmail=p.curry(function(e,n){if(!e)throw new Error("Email not found");var r=a(n)+"/retrieve_user_uid",i={email:e},o={application_user:d.assign(i,n).data},u=n.app.options.adaptor,s=h.getAdaptorObj("POST",r,t.exports.getCombinedHeaders(n),o,null);return u.makeCall(s).then(function(e){return n.cls.ObjectCons(t.exports.getHeaders(n),{},{},e.entity.uid)})}),y.define("fetchUserUidByEmail",2),t.exports.fetchUserUidByFacebookUserId=p.curry(function(e,t){if(!e)throw new Error("User id not found");return i("facebook","user_id",e,t)}),y.define("fetchUserUidByFacebookUserId",2),t.exports.fetchUserUidByGoogleEmail=p.curry(function(e,t){if(!e)throw new Error("Email address not found");return i("google","email",e,t)}),y.define("fetchUserUidByGoogleEmail",2),t.exports.fetchUserUidByTibbrUserId=p.curry(function(e,t){if(!e)throw new Error("User id not found");return i("tibbr","user_id",e,t)}),y.define("fetchUserUidByTibbrUserId",2),t.exports.fetchUserUidByTibbrHost=p.curry(function(e,t){if(!e)throw new Error("Tibbr host not found");return i("tibbr","host",e,t)}),y.define("fetchUserUidByTibbrHost",2),t.exports.fetchUserUidByTwitterUserId=p.curry(function(e,t){if(!e)throw new Error("User_id not found");return i("tibbr","user_id",e,t)}),y.define("fetchUserUidByTwitterUserId",2),t.exports.register=p.curry(function(e,t,n,r){var i={email:e,password:t,password_confirmation:n},o={application_user:d.assign(i,r).data};return u("POST",a(r),o,r).then(function(e){return m.trigger("user:register",e),e})}),y.define("register",4),t.exports.forgotPassword=p.curry(function(e,n){var r=n.app.options.adaptor,i={email:e},o={application_user:d.assign(i,n).data},u=a(n)+"/forgot_password/request_password_reset",s=h.getAdaptorObj("POST",u,t.exports.getCombinedHeaders(n),o,null);return r.makeCall(s).then(function(){return null})}),y.define("forgotPassword",2),t.exports.updateUserProfile=p.curry(function(e,n){var r={application_user:e};if(!n.get("uid"))return g.reject(new Error("Uid not found"));var i=a(n),o=n.app.options.adaptor,u=h.getAdaptorObj("PUT",i,t.exports.getCombinedHeaders(n),r,null);return o.makeCall(u).then(function(e){var r=n.cls.ObjectCons(t.exports.getHeaders(n),{},p.mixin({authtoken:n.get("authtoken")},e.entity.application_user),{});return r=r.set("authtoken",n.get("authtoken")),r.app.setSession(r.toJSON()),r})}),y.define("updateUserProfile",2),t.exports.loginWithGoogle=p.curry(function(e,t){var n={auth_data:{google:{access_token:e}}};return o(n,t)}),y.define("loginWithGoogle",2),t.exports.loginWithFacebook=p.curry(function(e,t){var n={auth_data:{facebook:{access_token:e}}};return o(n,t)}),y.define("loginWithFacebook",2),t.exports.loginWithTibbr=p.curry(function(e,t,n){var r={auth_data:{tibbr:{access_token:e,hostname:t}}};return o(r,n)}),y.define("loginWithTibbr",3),t.exports.loginWithTwitter=p.curry(function(e,t,n,r,i){var u={auth_data:{twitter:{token:e,token_secret:t,consumer_key:n,consumer_secret:r}}};return o(u,i)}),y.define("loginWithTwitter",5)},{"./built":7,"./events":10,"./object":15,"./session/cookie":19,"./utilities/instanceMethodBuilder":23,"./utilities/utility":25,ramda:32,when:62}],23:[function(e,t){var n=e("ramda");t.exports=function(){var e=[];return{define:function(t,n,r){e.push({name:t,argsLength:n,defaultValues:r})},build:function(t,r){return e.forEach(function(e){if(1===e.argsLength)r[e.name]=function(){return t[e.name].apply(null,[r])};else{var i=n.curry(n.nAry(e.argsLength,function(){var n=Array.prototype.slice.call(arguments,1,arguments.length);return n.push(arguments[0]),t[e.name].apply(null,n)}));i=i(r),r[e.name]=e.defaultValues?function(){var t=Array.prototype.slice.call(arguments,0);return t=t.concat(e.defaultValues.slice(-(e.argsLength-arguments.length))),i.apply(null,t)}:i}}),r}}}},{ramda:32}],24:[function(e,t){(function(n){function r(e,t){function r(e,t,n){var r="--"+e+"\r\n";return r+='Content-Disposition: form-data; name="'+t+'"\r\n\r\n',r+=n+"\r\n"}function i(e,t,n,r){var i="--"+e+"\r\n";return i+='Content-Disposition: form-data; name="'+n+'"; filename="'+r+'"\r\n',i+="Content-Type: "+t+"\r\n\r\n"}var o=Math.random(),u=[];if(e)for(var a in e){var s=e[a];u.push(new n(r(o,a,s),"ascii"))}if(t)for(var a in t){var s=t[a];u.push(new n(i(o,s.type,s.keyname,s.valuename),"ascii")),u.push(new n(s.data,"utf8"))}u.push(new n("\r\n--"+o+"--"),"ascii");for(var c=0,f=0;f<u.length;f++)c+=u[f].length;var l={postdata:u,headers:{"Content-Type":"multipart/form-data; boundary="+o,"Content-Length":c}};return l}function i(e,t,n,i){var o=a.defer(),c=r(e,t),f=c.headers;for(var l in i)f[l]=i[l];var p={host:n.host,path:n.path,method:n.method||"POST",headers:f};s.trigger("upload:start");for(var d=u.request(p,function(e){e.body="",e.setEncoding(n.encoding),e.on("data",function(t){e.body+=t}),e.on("end",function(){s.trigger("upload:end",JSON.parse(e.body)),o.resolve(e.body)}),e.on("error",function(){o.reject(e)})}),h=0;h<c.postdata.length;h++)d.write(c.postdata[h]);return d.end(),o.promise}var o=e("../node"),u=(o.fs,o.https),a=e("when"),s=e("../events");t.exports={getFormDataForPost:r,postData:i}}).call(this,e("buffer").Buffer)},{"../events":10,"../node":27,buffer:28,when:62}],25:[function(e,t){t.exports.copyProperties=function(e,t){for(method in t)e[method]=t[method]},t.exports.getAdaptorObj=function(e,t,n,r,i){if(!e)throw new Error("Http method is not specified");if(!t)throw new Error("Path for http request not specified");if(!n)throw new Error("Headers for http request not specified");var o={};return o.path=t,o.headers=n,o.method=e,r&&(o.entity=r),i&&(o.params=i),o},t.exports.wrapper=function(e,t){return function(){var n=Array.prototype.slice.call(arguments,0);return n=n.concat(t.slice(-(e.length-arguments.length))),e.apply(this,n)}},t.exports.isArray=function(e){return"[object Array]"===Object.prototype.toString.call(e)},t.exports.isNumber=function(e){return"number"==typeof e
},t.exports.isBoolean=function(e){return"boolean"==typeof e},t.exports.isString=function(e){return"string"==typeof e},t.exports.isQueryInstance=function(e){return!!e.where},t.exports.isFunction=function(e){var t={};return e&&"[object Function]"===t.toString.call(e)},t.exports.isObject=function(e){return"object"==typeof e},t.exports.isBrowser=function(){return!("undefined"==typeof window||!window.document)},t.exports.isLocalStroageAvaliable=function(){return!("undefined"==typeof localStorage)},t.exports.isEmpty=function(e){return e?0===Object.keys(e).length:void 0},t.exports.keyValue=function(){for(var e=null,t={},n=0;n<arguments.length;n++){var r=arguments[n];n%2===0?e=r:t[e]=r}return t},t.exports.backboneExist=function(){return!("undefined"==typeof Backbone||!Backbone.Model||!Backbone.Collection)},t.exports.supportsFormData=function(){return!("object"!=typeof window||"undefined"==typeof window.FormData)};var n=t.exports.encodeParam=function(e,n){return t.exports.isObject(n[e])?e+"="+encodeURIComponent(JSON.stringify(n[e])):e+"="+n[e]};t.exports.addParam=function(e,t,r){return e+=e.indexOf("?")>=0?"&"+n(t,r):"?"+n(t,r)}},{}],26:[function(){!function(e){"use strict";function t(e,t){var n=(65535&e)+(65535&t),r=(e>>16)+(t>>16)+(n>>16);return r<<16|65535&n}function n(e,t){return e<<t|e>>>32-t}function r(e,r,i,o,u,a){return t(n(t(t(r,e),t(o,a)),u),i)}function i(e,t,n,i,o,u,a){return r(t&n|~t&i,e,t,o,u,a)}function o(e,t,n,i,o,u,a){return r(t&i|n&~i,e,t,o,u,a)}function u(e,t,n,i,o,u,a){return r(t^n^i,e,t,o,u,a)}function a(e,t,n,i,o,u,a){return r(n^(t|~i),e,t,o,u,a)}function s(e,n){e[n>>5]|=128<<n%32,e[(n+64>>>9<<4)+14]=n;var r,s,c,f,l,p=1732584193,d=-271733879,h=-1732584194,g=271733878;for(r=0;r<e.length;r+=16)s=p,c=d,f=h,l=g,p=i(p,d,h,g,e[r],7,-680876936),g=i(g,p,d,h,e[r+1],12,-389564586),h=i(h,g,p,d,e[r+2],17,606105819),d=i(d,h,g,p,e[r+3],22,-1044525330),p=i(p,d,h,g,e[r+4],7,-176418897),g=i(g,p,d,h,e[r+5],12,1200080426),h=i(h,g,p,d,e[r+6],17,-1473231341),d=i(d,h,g,p,e[r+7],22,-45705983),p=i(p,d,h,g,e[r+8],7,1770035416),g=i(g,p,d,h,e[r+9],12,-1958414417),h=i(h,g,p,d,e[r+10],17,-42063),d=i(d,h,g,p,e[r+11],22,-1990404162),p=i(p,d,h,g,e[r+12],7,1804603682),g=i(g,p,d,h,e[r+13],12,-40341101),h=i(h,g,p,d,e[r+14],17,-1502002290),d=i(d,h,g,p,e[r+15],22,1236535329),p=o(p,d,h,g,e[r+1],5,-165796510),g=o(g,p,d,h,e[r+6],9,-1069501632),h=o(h,g,p,d,e[r+11],14,643717713),d=o(d,h,g,p,e[r],20,-373897302),p=o(p,d,h,g,e[r+5],5,-701558691),g=o(g,p,d,h,e[r+10],9,38016083),h=o(h,g,p,d,e[r+15],14,-660478335),d=o(d,h,g,p,e[r+4],20,-405537848),p=o(p,d,h,g,e[r+9],5,568446438),g=o(g,p,d,h,e[r+14],9,-1019803690),h=o(h,g,p,d,e[r+3],14,-187363961),d=o(d,h,g,p,e[r+8],20,1163531501),p=o(p,d,h,g,e[r+13],5,-1444681467),g=o(g,p,d,h,e[r+2],9,-51403784),h=o(h,g,p,d,e[r+7],14,1735328473),d=o(d,h,g,p,e[r+12],20,-1926607734),p=u(p,d,h,g,e[r+5],4,-378558),g=u(g,p,d,h,e[r+8],11,-2022574463),h=u(h,g,p,d,e[r+11],16,1839030562),d=u(d,h,g,p,e[r+14],23,-35309556),p=u(p,d,h,g,e[r+1],4,-1530992060),g=u(g,p,d,h,e[r+4],11,1272893353),h=u(h,g,p,d,e[r+7],16,-155497632),d=u(d,h,g,p,e[r+10],23,-1094730640),p=u(p,d,h,g,e[r+13],4,681279174),g=u(g,p,d,h,e[r],11,-358537222),h=u(h,g,p,d,e[r+3],16,-722521979),d=u(d,h,g,p,e[r+6],23,76029189),p=u(p,d,h,g,e[r+9],4,-640364487),g=u(g,p,d,h,e[r+12],11,-421815835),h=u(h,g,p,d,e[r+15],16,530742520),d=u(d,h,g,p,e[r+2],23,-995338651),p=a(p,d,h,g,e[r],6,-198630844),g=a(g,p,d,h,e[r+7],10,1126891415),h=a(h,g,p,d,e[r+14],15,-1416354905),d=a(d,h,g,p,e[r+5],21,-57434055),p=a(p,d,h,g,e[r+12],6,1700485571),g=a(g,p,d,h,e[r+3],10,-1894986606),h=a(h,g,p,d,e[r+10],15,-1051523),d=a(d,h,g,p,e[r+1],21,-2054922799),p=a(p,d,h,g,e[r+8],6,1873313359),g=a(g,p,d,h,e[r+15],10,-30611744),h=a(h,g,p,d,e[r+6],15,-1560198380),d=a(d,h,g,p,e[r+13],21,1309151649),p=a(p,d,h,g,e[r+4],6,-145523070),g=a(g,p,d,h,e[r+11],10,-1120210379),h=a(h,g,p,d,e[r+2],15,718787259),d=a(d,h,g,p,e[r+9],21,-343485551),p=t(p,s),d=t(d,c),h=t(h,f),g=t(g,l);return[p,d,h,g]}function c(e){var t,n="";for(t=0;t<32*e.length;t+=8)n+=String.fromCharCode(e[t>>5]>>>t%32&255);return n}function f(e){var t,n=[];for(n[(e.length>>2)-1]=void 0,t=0;t<n.length;t+=1)n[t]=0;for(t=0;t<8*e.length;t+=8)n[t>>5]|=(255&e.charCodeAt(t/8))<<t%32;return n}function l(e){return c(s(f(e),8*e.length))}function p(e,t){var n,r,i=f(e),o=[],u=[];for(o[15]=u[15]=void 0,i.length>16&&(i=s(i,8*e.length)),n=0;16>n;n+=1)o[n]=909522486^i[n],u[n]=1549556828^i[n];return r=s(o.concat(f(t)),512+8*t.length),c(s(u.concat(r),640))}function d(e){var t,n,r="0123456789abcdef",i="";for(n=0;n<e.length;n+=1)t=e.charCodeAt(n),i+=r.charAt(t>>>4&15)+r.charAt(15&t);return i}function h(e){return unescape(encodeURIComponent(e))}function g(e){return l(h(e))}function y(e){return d(g(e))}function m(e,t){return p(h(e),h(t))}function v(e,t){return d(m(e,t))}function x(e,t,n){return t?n?m(t,e):v(t,e):n?g(e):y(e)}"function"==typeof define&&define.amd?define(function(){return x}):e.md5=x}(this)},{}],27:[function(){},{}],28:[function(e,t,n){function r(e,t,n){if(!(this instanceof r))return new r(e,t,n);var i,o=typeof e;if("number"===o)i=e>0?e>>>0:0;else if("string"===o)"base64"===t&&(e=U(e)),i=r.byteLength(e,t);else{if("object"!==o||null===e)throw new Error("First argument needs to be a number, array or string.");"Buffer"===e.type&&k(e.data)&&(e=e.data),i=+e.length>0?Math.floor(+e.length):0}var u;K?u=r._augment(new Uint8Array(i)):(u=this,u.length=i,u._isBuffer=!0);var a;if(K&&"number"==typeof e.byteLength)u._set(e);else if(P(e))if(r.isBuffer(e))for(a=0;i>a;a++)u[a]=e.readUInt8(a);else for(a=0;i>a;a++)u[a]=(e[a]%256+256)%256;else if("string"===o)u.write(e,0,t);else if("number"===o&&!K&&!n)for(a=0;i>a;a++)u[a]=0;return u}function i(e,t,n,r){n=Number(n)||0;var i=e.length-n;r?(r=Number(r),r>i&&(r=i)):r=i;var o=t.length;F(o%2===0,"Invalid hex string"),r>o/2&&(r=o/2);for(var u=0;r>u;u++){var a=parseInt(t.substr(2*u,2),16);F(!isNaN(a),"Invalid hex string"),e[n+u]=a}return u}function o(e,t,n,r){var i=N(L(t),e,n,r);return i}function u(e,t,n,r){var i=N(R(t),e,n,r);return i}function a(e,t,n,r){return u(e,t,n,r)}function s(e,t,n,r){var i=N(B(t),e,n,r);return i}function c(e,t,n,r){var i=N(I(t),e,n,r);return i}function f(e,t,n){return J.fromByteArray(0===t&&n===e.length?e:e.slice(t,n))}function l(e,t,n){var r="",i="";n=Math.min(e.length,n);for(var o=t;n>o;o++)e[o]<=127?(r+=M(i)+String.fromCharCode(e[o]),i=""):i+="%"+e[o].toString(16);return r+M(i)}function p(e,t,n){var r="";n=Math.min(e.length,n);for(var i=t;n>i;i++)r+=String.fromCharCode(e[i]);return r}function d(e,t,n){return p(e,t,n)}function h(e,t,n){var r=e.length;(!t||0>t)&&(t=0),(!n||0>n||n>r)&&(n=r);for(var i="",o=t;n>o;o++)i+=T(e[o]);return i}function g(e,t,n){for(var r=e.slice(t,n),i="",o=0;o<r.length;o+=2)i+=String.fromCharCode(r[o]+256*r[o+1]);return i}function y(e,t,n,r){r||(F("boolean"==typeof n,"missing or invalid endian"),F(void 0!==t&&null!==t,"missing offset"),F(t+1<e.length,"Trying to read beyond buffer length"));var i=e.length;if(!(t>=i)){var o;return n?(o=e[t],i>t+1&&(o|=e[t+1]<<8)):(o=e[t]<<8,i>t+1&&(o|=e[t+1])),o}}function m(e,t,n,r){r||(F("boolean"==typeof n,"missing or invalid endian"),F(void 0!==t&&null!==t,"missing offset"),F(t+3<e.length,"Trying to read beyond buffer length"));var i=e.length;if(!(t>=i)){var o;return n?(i>t+2&&(o=e[t+2]<<16),i>t+1&&(o|=e[t+1]<<8),o|=e[t],i>t+3&&(o+=e[t+3]<<24>>>0)):(i>t+1&&(o=e[t+1]<<16),i>t+2&&(o|=e[t+2]<<8),i>t+3&&(o|=e[t+3]),o+=e[t]<<24>>>0),o}}function v(e,t,n,r){r||(F("boolean"==typeof n,"missing or invalid endian"),F(void 0!==t&&null!==t,"missing offset"),F(t+1<e.length,"Trying to read beyond buffer length"));var i=e.length;if(!(t>=i)){var o=y(e,t,n,!0),u=32768&o;return u?-1*(65535-o+1):o}}function x(e,t,n,r){r||(F("boolean"==typeof n,"missing or invalid endian"),F(void 0!==t&&null!==t,"missing offset"),F(t+3<e.length,"Trying to read beyond buffer length"));var i=e.length;if(!(t>=i)){var o=m(e,t,n,!0),u=2147483648&o;return u?-1*(4294967295-o+1):o}}function b(e,t,n,r){return r||(F("boolean"==typeof n,"missing or invalid endian"),F(t+3<e.length,"Trying to read beyond buffer length")),W.read(e,t,n,23,4)}function w(e,t,n,r){return r||(F("boolean"==typeof n,"missing or invalid endian"),F(t+7<e.length,"Trying to read beyond buffer length")),W.read(e,t,n,52,8)}function A(e,t,n,r,i){i||(F(void 0!==t&&null!==t,"missing value"),F("boolean"==typeof r,"missing or invalid endian"),F(void 0!==n&&null!==n,"missing offset"),F(n+1<e.length,"trying to write beyond buffer length"),H(t,65535));var o=e.length;if(!(n>=o)){for(var u=0,a=Math.min(o-n,2);a>u;u++)e[n+u]=(t&255<<8*(r?u:1-u))>>>8*(r?u:1-u);return n+2}}function E(e,t,n,r,i){i||(F(void 0!==t&&null!==t,"missing value"),F("boolean"==typeof r,"missing or invalid endian"),F(void 0!==n&&null!==n,"missing offset"),F(n+3<e.length,"trying to write beyond buffer length"),H(t,4294967295));var o=e.length;if(!(n>=o)){for(var u=0,a=Math.min(o-n,4);a>u;u++)e[n+u]=t>>>8*(r?u:3-u)&255;return n+4}}function C(e,t,n,r,i){i||(F(void 0!==t&&null!==t,"missing value"),F("boolean"==typeof r,"missing or invalid endian"),F(void 0!==n&&null!==n,"missing offset"),F(n+1<e.length,"Trying to write beyond buffer length"),D(t,32767,-32768));var o=e.length;if(!(n>=o))return t>=0?A(e,t,n,r,i):A(e,65535+t+1,n,r,i),n+2}function _(e,t,n,r,i){i||(F(void 0!==t&&null!==t,"missing value"),F("boolean"==typeof r,"missing or invalid endian"),F(void 0!==n&&null!==n,"missing offset"),F(n+3<e.length,"Trying to write beyond buffer length"),D(t,2147483647,-2147483648));var o=e.length;if(!(n>=o))return t>=0?E(e,t,n,r,i):E(e,4294967295+t+1,n,r,i),n+4}function O(e,t,n,r,i){i||(F(void 0!==t&&null!==t,"missing value"),F("boolean"==typeof r,"missing or invalid endian"),F(void 0!==n&&null!==n,"missing offset"),F(n+3<e.length,"Trying to write beyond buffer length"),q(t,3.4028234663852886e38,-3.4028234663852886e38));var o=e.length;if(!(n>=o))return W.write(e,t,n,r,23,4),n+4}function S(e,t,n,r,i){i||(F(void 0!==t&&null!==t,"missing value"),F("boolean"==typeof r,"missing or invalid endian"),F(void 0!==n&&null!==n,"missing offset"),F(n+7<e.length,"Trying to write beyond buffer length"),q(t,1.7976931348623157e308,-1.7976931348623157e308));var o=e.length;if(!(n>=o))return W.write(e,t,n,r,52,8),n+8}function U(e){for(e=j(e).replace(V,"");e.length%4!==0;)e+="=";return e}function j(e){return e.trim?e.trim():e.replace(/^\s+|\s+$/g,"")}function k(e){return(Array.isArray||function(e){return"[object Array]"===Object.prototype.toString.call(e)})(e)}function P(e){return k(e)||r.isBuffer(e)||e&&"object"==typeof e&&"number"==typeof e.length}function T(e){return 16>e?"0"+e.toString(16):e.toString(16)}function L(e){for(var t=[],n=0;n<e.length;n++){var r=e.charCodeAt(n);if(127>=r)t.push(r);else{var i=n;r>=55296&&57343>=r&&n++;for(var o=encodeURIComponent(e.slice(i,n+1)).substr(1).split("%"),u=0;u<o.length;u++)t.push(parseInt(o[u],16))}}return t}function R(e){for(var t=[],n=0;n<e.length;n++)t.push(255&e.charCodeAt(n));return t}function I(e){for(var t,n,r,i=[],o=0;o<e.length;o++)t=e.charCodeAt(o),n=t>>8,r=t%256,i.push(r),i.push(n);return i}function B(e){return J.toByteArray(e)}function N(e,t,n,r){for(var i=0;r>i&&!(i+n>=t.length||i>=e.length);i++)t[i+n]=e[i];return i}function M(e){try{return decodeURIComponent(e)}catch(t){return String.fromCharCode(65533)}}function H(e,t){F("number"==typeof e,"cannot write a non-number as a number"),F(e>=0,"specified a negative value for writing an unsigned value"),F(t>=e,"value is larger than maximum value for type"),F(Math.floor(e)===e,"value has a fractional component")}function D(e,t,n){F("number"==typeof e,"cannot write a non-number as a number"),F(t>=e,"value larger than maximum allowed value"),F(e>=n,"value smaller than minimum allowed value"),F(Math.floor(e)===e,"value has a fractional component")}function q(e,t,n){F("number"==typeof e,"cannot write a non-number as a number"),F(t>=e,"value larger than maximum allowed value"),F(e>=n,"value smaller than minimum allowed value")}function F(e,t){if(!e)throw new Error(t||"Failed assertion")}var J=e("base64-js"),W=e("ieee754");n.Buffer=r,n.SlowBuffer=r,n.INSPECT_MAX_BYTES=50,r.poolSize=8192;var K=function(){try{var e=new ArrayBuffer(0),t=new Uint8Array(e);return t.foo=function(){return 42},42===t.foo()&&"function"==typeof t.subarray&&0===new Uint8Array(1).subarray(1,1).byteLength}catch(n){return!1}}();r.isEncoding=function(e){switch(String(e).toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"binary":case"base64":case"raw":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return!0;default:return!1}},r.isBuffer=function(e){return!(null==e||!e._isBuffer)},r.byteLength=function(e,t){var n;switch(e=e.toString(),t||"utf8"){case"hex":n=e.length/2;break;case"utf8":case"utf-8":n=L(e).length;break;case"ascii":case"binary":case"raw":n=e.length;break;case"base64":n=B(e).length;break;case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":n=2*e.length;break;default:throw new Error("Unknown encoding")}return n},r.concat=function(e,t){if(F(k(e),"Usage: Buffer.concat(list[, length])"),0===e.length)return new r(0);if(1===e.length)return e[0];var n;if(void 0===t)for(t=0,n=0;n<e.length;n++)t+=e[n].length;var i=new r(t),o=0;for(n=0;n<e.length;n++){var u=e[n];u.copy(i,o),o+=u.length}return i},r.compare=function(e,t){F(r.isBuffer(e)&&r.isBuffer(t),"Arguments must be Buffers");for(var n=e.length,i=t.length,o=0,u=Math.min(n,i);u>o&&e[o]===t[o];o++);return o!==u&&(n=e[o],i=t[o]),i>n?-1:n>i?1:0},r.prototype.write=function(e,t,n,r){if(isFinite(t))isFinite(n)||(r=n,n=void 0);else{var f=r;r=t,t=n,n=f}t=Number(t)||0;var l=this.length-t;n?(n=Number(n),n>l&&(n=l)):n=l,r=String(r||"utf8").toLowerCase();var p;switch(r){case"hex":p=i(this,e,t,n);break;case"utf8":case"utf-8":p=o(this,e,t,n);break;case"ascii":p=u(this,e,t,n);break;case"binary":p=a(this,e,t,n);break;case"base64":p=s(this,e,t,n);break;case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":p=c(this,e,t,n);break;default:throw new Error("Unknown encoding")}return p},r.prototype.toString=function(e,t,n){var r=this;if(e=String(e||"utf8").toLowerCase(),t=Number(t)||0,n=void 0===n?r.length:Number(n),n===t)return"";var i;switch(e){case"hex":i=h(r,t,n);break;case"utf8":case"utf-8":i=l(r,t,n);break;case"ascii":i=p(r,t,n);break;case"binary":i=d(r,t,n);break;case"base64":i=f(r,t,n);break;case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":i=g(r,t,n);break;default:throw new Error("Unknown encoding")}return i},r.prototype.toJSON=function(){return{type:"Buffer",data:Array.prototype.slice.call(this._arr||this,0)}},r.prototype.equals=function(e){return F(r.isBuffer(e),"Argument must be a Buffer"),0===r.compare(this,e)},r.prototype.compare=function(e){return F(r.isBuffer(e),"Argument must be a Buffer"),r.compare(this,e)},r.prototype.copy=function(e,t,n,r){var i=this;if(n||(n=0),r||0===r||(r=this.length),t||(t=0),r!==n&&0!==e.length&&0!==i.length){F(r>=n,"sourceEnd < sourceStart"),F(t>=0&&t<e.length,"targetStart out of bounds"),F(n>=0&&n<i.length,"sourceStart out of bounds"),F(r>=0&&r<=i.length,"sourceEnd out of bounds"),r>this.length&&(r=this.length),e.length-t<r-n&&(r=e.length-t+n);var o=r-n;if(100>o||!K)for(var u=0;o>u;u++)e[u+t]=this[u+n];else e._set(this.subarray(n,n+o),t)}},r.prototype.slice=function(e,t){var n=this.length;if(e=~~e,t=void 0===t?n:~~t,0>e?(e+=n,0>e&&(e=0)):e>n&&(e=n),0>t?(t+=n,0>t&&(t=0)):t>n&&(t=n),e>t&&(t=e),K)return r._augment(this.subarray(e,t));for(var i=t-e,o=new r(i,void 0,!0),u=0;i>u;u++)o[u]=this[u+e];return o},r.prototype.get=function(e){return console.log(".get() is deprecated. Access using array indexes instead."),this.readUInt8(e)},r.prototype.set=function(e,t){return console.log(".set() is deprecated. Access using array indexes instead."),this.writeUInt8(e,t)},r.prototype.readUInt8=function(e,t){return t||(F(void 0!==e&&null!==e,"missing offset"),F(e<this.length,"Trying to read beyond buffer length")),e>=this.length?void 0:this[e]},r.prototype.readUInt16LE=function(e,t){return y(this,e,!0,t)},r.prototype.readUInt16BE=function(e,t){return y(this,e,!1,t)},r.prototype.readUInt32LE=function(e,t){return m(this,e,!0,t)},r.prototype.readUInt32BE=function(e,t){return m(this,e,!1,t)},r.prototype.readInt8=function(e,t){if(t||(F(void 0!==e&&null!==e,"missing offset"),F(e<this.length,"Trying to read beyond buffer length")),!(e>=this.length)){var n=128&this[e];return n?-1*(255-this[e]+1):this[e]}},r.prototype.readInt16LE=function(e,t){return v(this,e,!0,t)},r.prototype.readInt16BE=function(e,t){return v(this,e,!1,t)},r.prototype.readInt32LE=function(e,t){return x(this,e,!0,t)},r.prototype.readInt32BE=function(e,t){return x(this,e,!1,t)},r.prototype.readFloatLE=function(e,t){return b(this,e,!0,t)},r.prototype.readFloatBE=function(e,t){return b(this,e,!1,t)},r.prototype.readDoubleLE=function(e,t){return w(this,e,!0,t)},r.prototype.readDoubleBE=function(e,t){return w(this,e,!1,t)},r.prototype.writeUInt8=function(e,t,n){return n||(F(void 0!==e&&null!==e,"missing value"),F(void 0!==t&&null!==t,"missing offset"),F(t<this.length,"trying to write beyond buffer length"),H(e,255)),t>=this.length?void 0:(this[t]=e,t+1)},r.prototype.writeUInt16LE=function(e,t,n){return A(this,e,t,!0,n)},r.prototype.writeUInt16BE=function(e,t,n){return A(this,e,t,!1,n)},r.prototype.writeUInt32LE=function(e,t,n){return E(this,e,t,!0,n)},r.prototype.writeUInt32BE=function(e,t,n){return E(this,e,t,!1,n)},r.prototype.writeInt8=function(e,t,n){return n||(F(void 0!==e&&null!==e,"missing value"),F(void 0!==t&&null!==t,"missing offset"),F(t<this.length,"Trying to write beyond buffer length"),D(e,127,-128)),t>=this.length?void 0:(e>=0?this.writeUInt8(e,t,n):this.writeUInt8(255+e+1,t,n),t+1)},r.prototype.writeInt16LE=function(e,t,n){return C(this,e,t,!0,n)},r.prototype.writeInt16BE=function(e,t,n){return C(this,e,t,!1,n)},r.prototype.writeInt32LE=function(e,t,n){return _(this,e,t,!0,n)},r.prototype.writeInt32BE=function(e,t,n){return _(this,e,t,!1,n)},r.prototype.writeFloatLE=function(e,t,n){return O(this,e,t,!0,n)},r.prototype.writeFloatBE=function(e,t,n){return O(this,e,t,!1,n)},r.prototype.writeDoubleLE=function(e,t,n){return S(this,e,t,!0,n)},r.prototype.writeDoubleBE=function(e,t,n){return S(this,e,t,!1,n)},r.prototype.fill=function(e,t,n){if(e||(e=0),t||(t=0),n||(n=this.length),F(n>=t,"end < start"),n!==t&&0!==this.length){F(t>=0&&t<this.length,"start out of bounds"),F(n>=0&&n<=this.length,"end out of bounds");var r;if("number"==typeof e)for(r=t;n>r;r++)this[r]=e;else{var i=L(e.toString()),o=i.length;for(r=t;n>r;r++)this[r]=i[r%o]}return this}},r.prototype.inspect=function(){for(var e=[],t=this.length,r=0;t>r;r++)if(e[r]=T(this[r]),r===n.INSPECT_MAX_BYTES){e[r+1]="...";break}return"<Buffer "+e.join(" ")+">"},r.prototype.toArrayBuffer=function(){if("undefined"!=typeof Uint8Array){if(K)return new r(this).buffer;for(var e=new Uint8Array(this.length),t=0,n=e.length;n>t;t+=1)e[t]=this[t];return e.buffer}throw new Error("Buffer.toArrayBuffer not supported in this browser")};var Q=r.prototype;r._augment=function(e){return e._isBuffer=!0,e._get=e.get,e._set=e.set,e.get=Q.get,e.set=Q.set,e.write=Q.write,e.toString=Q.toString,e.toLocaleString=Q.toString,e.toJSON=Q.toJSON,e.equals=Q.equals,e.compare=Q.compare,e.copy=Q.copy,e.slice=Q.slice,e.readUInt8=Q.readUInt8,e.readUInt16LE=Q.readUInt16LE,e.readUInt16BE=Q.readUInt16BE,e.readUInt32LE=Q.readUInt32LE,e.readUInt32BE=Q.readUInt32BE,e.readInt8=Q.readInt8,e.readInt16LE=Q.readInt16LE,e.readInt16BE=Q.readInt16BE,e.readInt32LE=Q.readInt32LE,e.readInt32BE=Q.readInt32BE,e.readFloatLE=Q.readFloatLE,e.readFloatBE=Q.readFloatBE,e.readDoubleLE=Q.readDoubleLE,e.readDoubleBE=Q.readDoubleBE,e.writeUInt8=Q.writeUInt8,e.writeUInt16LE=Q.writeUInt16LE,e.writeUInt16BE=Q.writeUInt16BE,e.writeUInt32LE=Q.writeUInt32LE,e.writeUInt32BE=Q.writeUInt32BE,e.writeInt8=Q.writeInt8,e.writeInt16LE=Q.writeInt16LE,e.writeInt16BE=Q.writeInt16BE,e.writeInt32LE=Q.writeInt32LE,e.writeInt32BE=Q.writeInt32BE,e.writeFloatLE=Q.writeFloatLE,e.writeFloatBE=Q.writeFloatBE,e.writeDoubleLE=Q.writeDoubleLE,e.writeDoubleBE=Q.writeDoubleBE,e.fill=Q.fill,e.inspect=Q.inspect,e.toArrayBuffer=Q.toArrayBuffer,e};var V=/[^+\/0-9A-z]/g},{"base64-js":29,ieee754:30}],29:[function(e,t,n){var r="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/";!function(e){"use strict";function t(e){var t=e.charCodeAt(0);return t===u?62:t===a?63:s>t?-1:s+10>t?t-s+26+26:f+26>t?t-f:c+26>t?t-c+26:void 0}function n(e){function n(e){c[l++]=e}var r,i,u,a,s,c;if(e.length%4>0)throw new Error("Invalid string. Length must be a multiple of 4");var f=e.length;s="="===e.charAt(f-2)?2:"="===e.charAt(f-1)?1:0,c=new o(3*e.length/4-s),u=s>0?e.length-4:e.length;var l=0;for(r=0,i=0;u>r;r+=4,i+=3)a=t(e.charAt(r))<<18|t(e.charAt(r+1))<<12|t(e.charAt(r+2))<<6|t(e.charAt(r+3)),n((16711680&a)>>16),n((65280&a)>>8),n(255&a);return 2===s?(a=t(e.charAt(r))<<2|t(e.charAt(r+1))>>4,n(255&a)):1===s&&(a=t(e.charAt(r))<<10|t(e.charAt(r+1))<<4|t(e.charAt(r+2))>>2,n(a>>8&255),n(255&a)),c}function i(e){function t(e){return r.charAt(e)}function n(e){return t(e>>18&63)+t(e>>12&63)+t(e>>6&63)+t(63&e)}var i,o,u,a=e.length%3,s="";for(i=0,u=e.length-a;u>i;i+=3)o=(e[i]<<16)+(e[i+1]<<8)+e[i+2],s+=n(o);switch(a){case 1:o=e[e.length-1],s+=t(o>>2),s+=t(o<<4&63),s+="==";break;case 2:o=(e[e.length-2]<<8)+e[e.length-1],s+=t(o>>10),s+=t(o>>4&63),s+=t(o<<2&63),s+="="}return s}var o="undefined"!=typeof Uint8Array?Uint8Array:Array,u="+".charCodeAt(0),a="/".charCodeAt(0),s="0".charCodeAt(0),c="a".charCodeAt(0),f="A".charCodeAt(0);e.toByteArray=n,e.fromByteArray=i}("undefined"==typeof n?this.base64js={}:n)},{}],30:[function(e,t,n){n.read=function(e,t,n,r,i){var o,u,a=8*i-r-1,s=(1<<a)-1,c=s>>1,f=-7,l=n?i-1:0,p=n?-1:1,d=e[t+l];for(l+=p,o=d&(1<<-f)-1,d>>=-f,f+=a;f>0;o=256*o+e[t+l],l+=p,f-=8);for(u=o&(1<<-f)-1,o>>=-f,f+=r;f>0;u=256*u+e[t+l],l+=p,f-=8);if(0===o)o=1-c;else{if(o===s)return u?0/0:1/0*(d?-1:1);u+=Math.pow(2,r),o-=c}return(d?-1:1)*u*Math.pow(2,o-r)},n.write=function(e,t,n,r,i,o){var u,a,s,c=8*o-i-1,f=(1<<c)-1,l=f>>1,p=23===i?Math.pow(2,-24)-Math.pow(2,-77):0,d=r?0:o-1,h=r?1:-1,g=0>t||0===t&&0>1/t?1:0;for(t=Math.abs(t),isNaN(t)||1/0===t?(a=isNaN(t)?1:0,u=f):(u=Math.floor(Math.log(t)/Math.LN2),t*(s=Math.pow(2,-u))<1&&(u--,s*=2),t+=u+l>=1?p/s:p*Math.pow(2,1-l),t*s>=2&&(u++,s/=2),u+l>=f?(a=0,u=f):u+l>=1?(a=(t*s-1)*Math.pow(2,i),u+=l):(a=t*Math.pow(2,l-1)*Math.pow(2,i),u=0));i>=8;e[n+d]=255&a,d+=h,a/=256,i-=8);for(u=u<<i|a,c+=i;c>0;e[n+d]=255&u,d+=h,u/=256,c-=8);e[n+d-h]|=128*g}},{}],31:[function(e,t){function n(){}var r=t.exports={};r.nextTick=function(){var e="undefined"!=typeof window&&window.setImmediate,t="undefined"!=typeof window&&window.postMessage&&window.addEventListener;if(e)return function(e){return window.setImmediate(e)};if(t){var n=[];return window.addEventListener("message",function(e){var t=e.source;if((t===window||null===t)&&"process-tick"===e.data&&(e.stopPropagation(),n.length>0)){var r=n.shift();r()}},!0),function(e){n.push(e),window.postMessage("process-tick","*")}}return function(e){setTimeout(e,0)}}(),r.title="browser",r.browser=!0,r.env={},r.argv=[],r.on=n,r.addListener=n,r.once=n,r.off=n,r.removeListener=n,r.removeAllListeners=n,r.emit=n,r.binding=function(){throw new Error("process.binding is not supported")},r.cwd=function(){return"/"},r.chdir=function(){throw new Error("process.chdir is not supported")}},{}],32:[function(e,t,n){!function(e,r){"object"==typeof n?t.exports=r(e):"function"==typeof define&&define.amd?define(r):e.ramda=r(e)}(this,function(e){"use strict";return function(){function t(e,t,n){t="number"==typeof t?t:0,n="number"==typeof n?n:e.length;for(var r=n-t,i=new Array(r),o=-1;++o<r;)i[o]=e[t+o];return i}function n(e){return function(t,n){switch(arguments.length){case 0:throw U;case 1:return function(n){return e(t,n)}}return e(t,n)}}function r(e){return function(t,r,i){switch(arguments.length){case 0:throw U;case 1:return n(function(n,r){return e(t,n,r)});case 2:return function(n){return e(t,r,n)}}return e(t,r,i)}}function i(e,t){return function(n,r,i){var o=arguments.length,u=arguments[o-1],a=u&&!_(u)&&"function"==typeof u[e];switch(arguments.length){case 0:return t();case 1:return a?u[e]():t(n);case 2:return a?u[e](n):t(n,r);case 3:return a?u[e](n,r):t(n,r,i);case 4:return a?u[e](n,r,i):t(n,r,i,u)}}}function o(e,t){for(var n=-1,r=t.length;++n<r;)e(t[n]);return t}function u(e){return!e||!e.length}function a(e,t){return E([e],t)}function s(e,t){return function(){return e.apply(this,E([t],arguments))}}function c(e,t){return function(){return e.call(this,t.apply(this,arguments))}}function f(e,t){for(var n=-1,r=t.length,i=new Array(r);++n<r;)i[n]=e(t[n]);return i}function l(e,t){for(var n=-1,r=t.length,i=[];++n<r;)e(t[n],n,t)&&i.push(t[n]);return i}function p(e,t){for(var n=-1;++n<t.length;)if(!e(t[n]))return!1;return!0}function d(e,t){for(var n=-1;++n<t.length;)if(e(t[n]))return!0;return!1}function h(e,t){return W(t,e)>-1}function g(e,t,n){for(var r=-1,i=n.length;++r<i;)if(e(t,n[r]))return!0;return!1}function y(e,t){for(var n,r,i={},o=nt(t),u=0,a=o.length;a>u;u++)n=o[u],r=t[n],e(r,n,t)&&(i[n]=r);return i}function m(e,t){for(var n=nt(t),r=-1,i=n.length;++r<i;)e[n[r]]=t[n[r]];return e}function v(e,t,n){if(e===n)return!0;if(null==n)return!1;t.fn=t.fn||[],t.obj=t.obj||[];for(var r,i,o=-1,u=t.fn.length,a=-1,s=t.obj.length;++o<u;){if(r=t.fn[o],i=e[r],!(r in n))return!1;if(!i(n[r],n))return!1}for(;++a<s;)if(r=t.obj[a],e[r]!==n[r])return!1;return!0}function x(e,t){var n,r=-1,i=e.length;if(null!=t){for(n=t;null!=n&&++r<i;)n=n[e[r]];return n}}function b(e,t){return f(function(t){return{key:e(t),val:t}},t)}var w={},A=function(e){var t=function(n){return w[n]=w[e],t};return t.is=t.are=t.and=t,t},E=function(e,t){e=e||[],t=t||[];for(var n=e.length,r=t.length,i=new Array(n+r),o=0;n>o;o++)i[o]=e[o];for(o=0;r>o;o++)i[o+n]=t[o];return i},C=Object.prototype.toString,_=Array.isArray||function(e){return e&&e.length>=0&&"[object Array]"===C.call(e)},O=function(e){return null!=e&&e.length>=0&&(_(e)||!w.is(String,e))},S=w.curry=function(e,t){function n(r){return L(Math.max(t-(r&&r.length||0),0),function(){if(0===arguments.length)throw U;var i=E(r,arguments);return i.length>=t?e.apply(this,i):n(i)})}return t="number"==typeof t?t:e.length,n([])},U=new TypeError("Function called with no arguments"),j=function(e,t){return t&&!_(t)&&"function"==typeof t[e]},k=function(e){for(var t=[],n=-1;++n<e;)t[n]="arg"+n;return t.join(", ")},P=w.nAry=function(){var e={0:function(e){return function(){return e.call(this)}},1:function(e){return function(t){return e.call(this,t)}},2:function(e){return function(t,n){return e.call(this,t,n)}},3:function(e){return function(t,n,r){return e.call(this,t,n,r)}}},t=function(e){var t=k(e),n=["    return function("+t+") {","        return func.call(this"+(t?", "+t:"")+");","    }"].join("\n");return new Function("func",n)};return function(n,r){return(e[n]||(e[n]=t(n)))(r)}}();w.unary=function(e){return P(1,e)};var T=w.binary=function(e){return P(2,e)},L=w.arity=function(){var e={0:function(e){return function(){return e.apply(this,arguments)}},1:function(e){return function(){return e.apply(this,arguments)}},2:function(e){return function(){return e.apply(this,arguments)}},3:function(e){return function(){return e.apply(this,arguments)}}},t=function(e){var t=k(e),n=["    return function("+t+") {","        return func.apply(this, arguments);","    }"].join("\n");return new Function("func",n)};return function(n,r){return(e[n]||(e[n]=t(n)))(r)}}(),R=w.invoker=function(e,t,n){var r=t[e],i=void 0===n?r.length:n;return r&&S(function(){if(arguments.length){var t=Array.prototype.pop.call(arguments),n=t[e];if(n==r)return n.apply(t,arguments)}},i+1)},I=w.useWith=function(e){var n=t(arguments,1),r=n.length;return S(L(r,function(){for(var i=[],o=-1;++o<r;)i.push(n[o](arguments[o]));return e.apply(this,i.concat(t(arguments,r)))}))};A("useWith").is("disperseTo"),w.each=n(o),w.each.idx=n(function(e,t){for(var n=-1,r=t.length;++n<r;)e(t[n],n,t);return t}),A("each").is("forEach");var B=w.clone=function(e){return t(e)};w.isEmpty=u,w.prepend=a,A("prepend").is("cons");w.head=function(e){return e=e||[],e[0]};A("head").is("car").and("first"),w.last=function(e){return e=e||[],e[e.length-1]};w.tail=i("tail",function(e){return e=e||[],e.length>1?t(e,1):[]});A("tail").is("cdr"),w.isAtom=function(e){return null!=e&&!_(e)};var N=w.append=function(e,t){return E(t,[e])};A("append").is("push"),w.concat=n(function(e,t){return j("concat",e)?e.concat(t):E(e,t)});var M=w.identity=function(e){return e};A("identity").is("I"),w.times=n(function(e,t){for(var n=new Array(t),r=-1;++r<t;)n[r]=e(r);return n}),w.repeatN=n(function(e,t){return w.times(w.always(e),t)});var H=w.compose=function(){switch(arguments.length){case 0:throw U;case 1:return arguments[0];default:for(var e=arguments.length-1,t=arguments[e],n=t.length;e--;)t=c(arguments[e],t);return L(n,t)}};w.pipe=function(){return 1==arguments.length?s(w.pipe,arguments[0]):H.apply(this,t(arguments).reverse())},A("pipe").is("sequence");var D=w.flip=function(e){return function(n,r){return arguments.length<2?function(r){return e.apply(this,[r,n].concat(t(arguments,1)))}:e.apply(this,[r,n].concat(t(arguments,2)))}};w.lPartial=function(e){var n=t(arguments,1);return L(Math.max(e.length-n.length,0),function(){return e.apply(this,E(n,arguments))})},A("lPartial").is("applyLeft"),w.rPartial=function(e){var n=t(arguments,1);return L(Math.max(e.length-n.length,0),function(){return e.apply(this,E(arguments,n))})},A("rPartial").is("applyRight"),w.memoize=function(e){var n={};return function(){var r=q(function(e,t){return e[t]||(e[t]={})},n,t(arguments,0,arguments.length-1)),i=arguments[arguments.length-1];return r[i]||(r[i]=e.apply(this,arguments))}},w.once=function(e){var t,n=!1;return function(){return n?t:(n=!0,t=e.apply(this,arguments))}},w.wrap=function(e,t){return function(){return t.apply(this,E([e],arguments))}},w.construct=function(e){var t=function(){var t=new e;return e.apply(t,arguments),t};return e.length>1?S(P(e.length,t)):t},w.fork=function(e){var n=t(arguments,1);return function(){var t=arguments;return e.apply(this,f(function(e){return e.apply(this,t)},n))}},A("fork").is("distributeTo");var q=w.foldl=r(i("foldl",function(e,t,n){for(var r=-1,i=n.length;++r<i;)t=e(t,n[r]);return t}));A("foldl").is("reduce"),w.foldl.idx=r(i("foldl",function(e,t,n){for(var r=-1,i=n.length;++r<i;)t=e(t,n[r],r,n);return t}));w.foldr=r(i("foldr",function(e,t,n){for(var r=n.length;r--;)t=e(t,n[r]);return t}));A("foldr").is("reduceRight"),w.foldr.idx=r(i("foldr",function(e,t,n){for(var r=n.length;r--;)t=e(t,n[r],r,n);return t})),w.unfoldr=n(function(e,t){for(var n=e(t),r=[];n&&n.length;)r.push(n[0]),n=e(n[1]);return r}),w.map=n(i("map",f)),w.map.idx=n(i("map",function(e,t){for(var n=-1,r=t.length,i=new Array(r);++n<r;)i[n]=e(t[n],n,t);return i})),w.mapObj=n(function(e,t){return q(function(n,r){return n[r]=e(t[r]),n},{},nt(t))}),w.mapObj.idx=n(function(e,t){return q(function(n,r){return n[r]=e(t[r],r,t),n},{},nt(t))}),w.ap=n(i("ap",function(e,t){return q(function(e,n){return E(e,f(n,t))},[],e)})),w.of=function(e,t){return j("of",t)?t.of(e):[e]},w.empty=function(e){return j("empty",e)?e.empty():[]},w.chain=n(i("chain",function(e,t){return $(f(e,t))})),A("chain").is("flatMap"),w.size=function(e){return e.length},A("size").is("length");var F=function(e,t){for(var n=-1,r=t.length,i=[];++n<r;)e(t[n])&&i.push(t[n]);return i};w.filter=n(i("filter",F)),w.filter.idx=n(i("filter",l));var J=function(e,t){return F(it(e),t)};w.reject=n(J),w.reject.idx=n(function(e,t){return l(it(e),t)}),w.takeWhile=n(i("takeWhile",function(e,n){for(var r=-1,i=n.length;++r<i&&e(n[r]););return t(n,0,r)})),w.take=n(i("take",function(e,n){return t(n,0,Math.min(e,n.length))})),w.skipUntil=n(function(e,n){for(var r=-1,i=n.length;++r<i&&!e(n[r]););return t(n,r)}),w.skip=n(i("skip",function(e,n){return t(n,e)})),A("skip").is("drop"),w.find=n(function(e,t){for(var n=-1,r=t.length;++n<r;)if(e(t[n]))return t[n]}),w.findIndex=n(function(e,t){for(var n=-1,r=t.length;++n<r;)if(e(t[n]))return n;
return-1}),w.findLast=n(function(e,t){for(var n=t.length;--n;)if(e(t[n]))return t[n]}),w.findLastIndex=n(function(e,t){for(var n=t.length;--n;)if(e(t[n]))return n;return-1}),w.all=n(p),A("all").is("every"),w.any=n(d),A("any").is("some");var W=function(e,t,n){var r=0,i=e.length;for("number"==typeof n&&(r=0>n?Math.max(0,i+n):n);i>r;r++)if(e[r]===t)return r;return-1},K=function(e,t,n){var r=e.length;for("number"==typeof n&&(r=0>n?r+n+1:Math.min(r,n+1));--r>=0;)if(e[r]===t)return r;return-1};w.indexOf=n(function(e,t){return W(t,e)}),w.indexOf.from=r(function(e,t,n){return W(n,e,t)}),w.lastIndexOf=n(function(e,t){return K(t,e)}),w.lastIndexOf.from=r(function(e,t,n){return K(n,e,t)}),w.contains=n(h),w.containsWith=r(g);var Q=w.uniq=function(e){for(var t,n=-1,r=e.length,i=[];++n<r;)t=e[n],h(t,i)||i.push(t);return i};w.isSet=function(e){for(var t=e.length,n=-1;++n<t;)if(W(e,e[n],n+1)>=0)return!1;return!0};{var V=w.uniqWith=n(function(e,t){for(var n,r=-1,i=t.length,o=[];++r<i;)n=t[r],g(e,n,o)||o.push(n);return o}),z=w.pluck=n(function(e,t){return f(Y(e),t)}),G=function(e){return function t(n){for(var r,i,o,u,a=[],s=-1,c=n.length;++s<c;)if(r=n[s],O(r))for(i=e?t(r):r,o=-1,u=i.length;++o<u;)a.push(i[o]);else a.push(r);return a}};w.flatten=G(!0)}A("flatten").is("flattenDeep");var $=w.unnest=G(!1);A("unnest").is("flattenShallow"),w.zipWith=r(function(e,t,n){for(var r=[],i=-1,o=Math.min(t.length,n.length);++i<o;)r[i]=e(t[i],n[i]);return r}),w.zip=n(function(e,t){for(var n=[],r=-1,i=Math.min(e.length,t.length);++r<i;)n[r]=[e[r],t[r]];return n}),w.zipObj=n(function(e,t){for(var n=-1,r=e.length,i={};++n<r;)i[e[n]]=t[n];return i}),w.fromPairs=function(e){for(var t=-1,n=e.length,r={};++t<n;)_(e[t])&&e[t].length&&(r[e[t][0]]=e[t][1]);return r},w.xprodWith=r(function(e,t,n){if(u(t)||u(n))return[];for(var r,i=-1,o=t.length,a=n.length,s=[];++i<o;)for(r=-1;++r<a;)s.push(e(t[i],n[r]));return s}),w.xprod=n(function(e,t){if(u(e)||u(t))return[];for(var n,r=-1,i=e.length,o=t.length,a=[];++r<i;)for(n=-1;++n<o;)a.push([e[r],t[n]]);return a}),w.reverse=function(e){return B(e||[]).reverse()},w.range=n(function(e,t){if(e>=t)return[];for(var n=0,r=new Array(Math.floor(t)-Math.ceil(e));t>e;n++,e++)r[n]=e;return r}),w.join=R("join",Array.prototype),w.slice=R("slice",Array.prototype),w.slice.from=D(w.slice)(void 0),w.remove=r(function(e,n,r){return E(t(r,0,Math.min(e,r.length)),t(r,Math.min(r.length,e+n)))}),w.insert=r(function(e,n,r){return e=e<r.length&&e>=0?e:r.length,E(N(n,t(r,0,e)),t(r,e))}),w.insert.all=r(function(e,n,r){return e=e<r.length&&e>=0?e:r.length,E(E(t(r,0,e),n),t(r,e))});{var X=w.comparator=function(e){return function(t,n){return e(t,n)?-1:e(n,t)?1:0}};w.sort=n(function(e,t){return B(t).sort(e)})}w.groupBy=n(function(e,t){return q(function(t,n){var r=e(n);return t[r]=N(n,t[r]||(t[r]=[])),t},{},t)}),w.partition=n(function(e,t){return q(function(t,n){return t[e(n)?0:1].push(n),t},[[],[]],t)}),w.tap=n(function(e,t){return"function"==typeof t&&t(e),e}),w.eq=function(e,t){return arguments.length<2?function(t){return e===t}:e===t};var Y=w.prop=function(e,t){return arguments.length<2?function(t){return t[e]}:t[e]};A("prop").is("nth").and("get"),w.func=function(e,n){function r(n){return n[e].apply(n,t(arguments,1))}return arguments.length<2?r:r(n)},w.props=function(e,t){return arguments.length<2?function(t){return e&&e[t]}:e&&e[t]};var Z=w.always=function(e){return function(){return e}};A("always").is("constant").and("K");var et=(w.any(function(e){return null==e}),Object.prototype.hasOwnProperty),tt=Object.keys,nt=w.keys=function(e){if(tt)return tt(Object(e));var t,n=[];for(t in e)et.call(e,t)&&n.push(t);return n};w.keysIn=function(e){var t,n=[];for(t in e)n.push(t);return n},w.values=function(e){for(var t=nt(e),n=t.length,r=new Array(n),i=0;n>i;i++)r[i]=e[t[i]];return r},w.valuesIn=function(e){var t,n=[];for(t in e)n.push(e[t]);return n},w.pick=n(function(e,t){return y(function(t,n){return h(n,e)},t)}),w.omit=n(function(e,t){return y(function(t,n){return!h(n,e)},t)}),w.pickWith=n(y);var rt=function(e,t){var n={};return o(function(e){n[e]=t[e]},e),n};w.pickAll=n(rt),w.mixin=n(function(e,t){return m(m({},e),t)}),w.eqProps=r(function(e,t,n){return t[e]===n[e]}),w.where=function(e,t){var n=w.groupBy(function(t){return"function"==typeof e[t]?"fn":"obj"},nt(e));switch(arguments.length){case 0:throw U;case 1:return function(t){return v(e,n,t)}}return v(e,n,t)},w.installTo=function(t){return m(t||e,w)},w.is=n(function(e,t){return null!=t&&Object(t)instanceof e}),w.alwaysZero=Z(0),w.alwaysFalse=Z(!1),w.alwaysTrue=Z(!0),w.and=n(function(e,t){return function(){return!(!e.apply(this,arguments)||!t.apply(this,arguments))}}),w.or=n(function(e,t){return function(){return!(!e.apply(this,arguments)&&!t.apply(this,arguments))}});var it=w.not=function(e){return function(){return!e.apply(this,arguments)}},ot=function(e){return function(n){var r=function(){var t=arguments;return e(function(e){return e.apply(null,t)},n)};return arguments.length>1?r.apply(null,t(arguments,1)):L(pt(z("length",n)),r)}};w.allPredicates=ot(p),w.anyPredicates=ot(d);var ut=w.add=function(e,t){return arguments.length<2?function(t){return e+t}:e+t},at=w.multiply=function(e,t){return arguments.length<2?function(t){return e*t}:e*t},st=w.subtract=function(e,t){return arguments.length<2?function(t){return e-t}:e-t};w.subtractN=D(st);var ct=w.divide=function(e,t){return arguments.length<2?function(t){return e/t}:e/t};w.divideBy=D(ct);var ft=w.modulo=function(e,t){return arguments.length<2?function(t){return e%t}:e%t},lt=Number.isInteger||function(e){return e<<0===e};w.mathMod=n(function(e,t){return!lt(e)||1>e?0/0:lt(t)?(e%t+t)%t:0/0}),w.moduloBy=D(ft),w.sum=q(ut,0),w.product=q(at,1),w.lt=function(e,t){return arguments.length<2?function(t){return t>e}:t>e},w.lte=function(e,t){return arguments.length<2?function(t){return t>=e}:t>=e},w.gt=function(e,t){return arguments.length<2?function(t){return e>t}:e>t},w.gte=function(e,t){return arguments.length<2?function(t){return e>=t}:e>=t};var pt=w.max=function(e){return q(T(Math.max),-1/0,e)};w.maxWith=n(function(e,t){if(t&&t.length>0){for(var n,r=0,i=t[r],o=e(i);++r<t.length;)n=e(t[r]),n>o&&(o=n,i=t[r]);return i}}),w.minWith=n(function(e,t){if(t&&t.length>0){for(var n,r=0,i=t[r],o=e(t[r]);++r<t.length;)n=e(t[r]),o>n&&(o=n,i=t[r]);return i}}),w.min=function(e){return q(T(Math.min),1/0,e)};var dt=w.substring=R("substring",String.prototype);return w.substringFrom=D(dt)(void 0),w.substringTo=dt(0),w.charAt=R("charAt",String.prototype),w.charCodeAt=R("charCodeAt",String.prototype),w.match=R("match",String.prototype),w.strIndexOf=R("indexOf",String.prototype),w.strLastIndexOf=R("lastIndexOf",String.prototype),w.toUpperCase=R("toUpperCase",String.prototype),w.toLowerCase=R("toLowerCase",String.prototype),w.split=R("split",String.prototype,1),w.pathOn=r(function(e,t,n){return x(t.split(e),n)}),w.path=w.pathOn("."),w.project=I(f,w.pickAll,M),w.propEq=r(function(e,t,n){return n[e]===t}),w.union=H(Q,w.concat),w.unionWith=r(function(e,t,n){return V(e,E(t,n))}),w.difference=n(function(e,t){return Q(J(D(h)(t),e))}),w.differenceWith=r(function(e,t,n){return V(e)(J(D(w.containsWith(e))(n),t))}),w.intersection=n(function(e,t){return Q(F(D(h)(e),t))}),w.intersectionWith=r(function(e,t,n){for(var r=[],i=-1;++i<t.length;)g(e,t[i],n)&&(r[r.length]=t[i]);return V(e,r)}),w.sortBy=n(function(e,t){return z("val",b(e,t).sort(X(function(e,t){return e.key<t.key})))}),w.countBy=n(function(e,t){return q(function(e,t){return e[t.key]=(e[t.key]||0)+1,e},{},b(e,t))}),w}()})},{}],33:[function(e,t){!function(e,t){"use strict";var n;e(function(e){function r(e,t){var n,r,i,o;if(n=e,i={},t){for(r in t)o=new RegExp("\\{"+r+"\\}"),o.test(n)?n=n.replace(o,encodeURIComponent(t[r]),"g"):i[r]=t[r];for(r in i)n+=-1===n.indexOf("?")?"?":"&",n+=encodeURIComponent(r),null!==i[r]&&void 0!==i[r]&&(n+="=",n+=encodeURIComponent(i[r]))}return n}function i(e,t){return 0===e.indexOf(t)}function o(e,t){return this instanceof o?void(e instanceof o?(this._template=e.template,this._params=u({},this._params,t)):(this._template=(e||"").toString(),this._params=t||{})):new o(e,t)}var u,a,s,c,f;return u=e("./util/mixin"),s=/([a-z][a-z0-9\+\-\.]*:)\/\/([^@]+@)?(([^:\/]+)(:([0-9]+))?)?(\/[^?#]*)?(\?[^#]*)?(#\S*)?/i,c=/^([a-z][a-z0-9\-\+\.]*:\/\/|\/)/i,f=/([a-z][a-z0-9\+\-\.]*:)\/\/([^@]+@)?(([^:\/]+)(:([0-9]+))?)?\//i,o.prototype={append:function(e,t){return new o(this._template+e,u({},this._params,t))},fullyQualify:function(){if(!t)return this;if(this.isFullyQualified())return this;var e=this._template;return i(e,"//")?e=a.protocol+e:i(e,"/")?e=a.origin+e:this.isAbsolute()||(e=a.origin+a.pathname.substring(0,a.pathname.lastIndexOf("/")+1)),-1===e.indexOf("/",8)&&(e+="/"),new o(e,this._params)},isAbsolute:function(){return c.test(this.build())},isFullyQualified:function(){return f.test(this.build())},isCrossOrigin:function(){if(!a)return!0;var e=this.parts();return e.protocol!==a.protocol||e.hostname!==a.hostname||e.port!==a.port},parts:function(){var e,t;return e=this.fullyQualify().build().match(s),t={href:e[0],protocol:e[1],host:e[3]||"",hostname:e[4]||"",port:e[6],pathname:e[7]||"",search:e[8]||"",hash:e[9]||""},t.origin=t.protocol+"//"+t.host,t.port=t.port||("https:"===t.protocol?"443":"http:"===t.protocol?"80":""),t},build:function(e){return r(this._template,u({},this._params,e))},toString:function(){return this.build()}},a=t?new o(t.href).parts():n,o})}("function"==typeof define&&define.amd?define:function(n){t.exports=n(e)},"undefined"!=typeof window?window.location:void 0)},{"./util/mixin":43}],34:[function(e,t){!function(e){"use strict";e(function(){return function(e,t){return t&&(e.skip=function(){return t}),e.wrap=function(t,n){return t(e,n)},e.chain=function(){return console&&(console.warn||console.log).call(console,"rest.js: client.chain() is deprecated, use client.wrap() instead"),e.wrap.apply(this,arguments)},e}})}("function"==typeof define&&define.amd?define:function(n){t.exports=n(e)})},{}],35:[function(e,t){!function(e,t){"use strict";e(function(e){function n(e){var t={};return e?(e.trim().split(s).forEach(function(e){var n,r,i;n=e.indexOf(":"),r=o(e.substring(0,n).trim()),i=e.substring(n+1).trim(),t[r]?Array.isArray(t[r])?t[r].push(i):t[r]=[t[r],i]:t[r]=i}),t):t}var r,i,o,u,a,s;return r=e("when"),i=e("../UrlBuilder"),o=e("../util/normalizeHeaderName"),u=e("../util/responsePromise"),a=e("../client"),s=/[\r|\n]+/,a(function(e){return new u.ResponsePromise(function(r,o){var u,a,s,c,f,l,p,d;if(e="string"==typeof e?{path:e}:e||{},p={request:e},e.canceled)return p.error="precanceled",void o(p);if(d=e.engine||t.XMLHttpRequest,!d)return void o({request:e,error:"xhr-not-available"});f=e.entity,e.method=e.method||(f?"POST":"GET"),a=e.method,s=new i(e.path||"",e.params).build();try{u=p.raw=new d,u.open(a,s,!0),e.mixin&&Object.keys(e.mixin).forEach(function(t){e.mixin.hasOwnProperty(t)&&t in u&&(u[t]=e.mixin[t])}),c=e.headers;for(l in c)u.setRequestHeader(l,c[l]);e.canceled=!1,e.cancel=function(){e.canceled=!0,u.abort(),o(p)},u.onreadystatechange=function(){e.canceled||u.readyState===(d.DONE||4)&&(p.status={code:u.status,text:u.statusText},p.headers=n(u.getAllResponseHeaders()),p.entity=u.responseText,p.status.code>0&&r(p))};try{u.onerror=function(){p.error="loaderror",o(p)}}catch(h){}u.send(f)}catch(h){p.error="loaderror",o(p)}})})})}("function"==typeof define&&define.amd?define:function(n){t.exports=n(e)},"undefined"!=typeof window?window:void 0)},{"../UrlBuilder":33,"../client":34,"../util/normalizeHeaderName":44,"../util/responsePromise":45,when:62}],36:[function(e,t){!function(e){"use strict";e(function(e){function t(e){return e}function n(e){return e}function r(e){return e}function i(e){return l.promise(function(t,n){e.forEach(function(e){l(e,t,n)})})}function o(e){return this instanceof o?void s(this,e):new o(e)}function u(e){var u,s,p,d;return e=e||{},u=e.init||t,s=e.request||n,p=e.success||e.response||r,d=e.error||function(){return l((e.response||r).apply(this,arguments),l.reject,l.reject)},function(t,n){function r(e){var u,a;return u={},a={arguments:Array.prototype.slice.call(arguments),client:r},e="string"==typeof e?{path:e}:e||{},e.originator=e.originator||r,c(l(s.call(u,e,n,a),function(e){var r,s,c;return c=t,e instanceof o&&(s=e.abort,c=e.client||c,r=e.response,e=e.request),r=r||l(e,function(e){return l(c(e),function(e){return p.call(u,e,n,a)},function(e){return d.call(u,e,n,a)})}),s?i([r,s]):r},function(t){return l.reject({request:e,error:t})}))}return"object"==typeof t&&(n=t),"function"!=typeof t&&(t=e.client||a),n=u(Object.create(n||{})),f(r,t)}}var a,s,c,f,l;return a=e("./rest"),s=e("./util/mixin"),c=e("./util/responsePromise"),f=e("./client"),l=e("when"),u.ComplexRequest=o,u})}("function"==typeof define&&define.amd?define:function(n){t.exports=n(e)})},{"./client":34,"./rest":42,"./util/mixin":43,"./util/responsePromise":45,when:62}],37:[function(e,t){!function(e){"use strict";e(function(e){var t,n;return t=e("../interceptor"),n=e("when"),t({init:function(e){return e.code=e.code||400,e},response:function(e,t){return e.status&&e.status.code>=t.code?n.reject(e):e}})})}("function"==typeof define&&define.amd?define:function(n){t.exports=n(e)})},{"../interceptor":36,when:62}],38:[function(e,t){!function(e){"use strict";e(function(e){var t,n,r,i;return t=e("../interceptor"),n=e("../mime/registry"),i=e("when"),r=n.lookup("text/plain"),t({init:function(e){return e.registry=e.registry||n,e},request:function(e,t){var n,r;return r=e.headers||(e.headers={}),n=r["Content-Type"]=r["Content-Type"]||t.mime||"text/plain",r.Accept=r.Accept||t.accept||n+", application/json;q=0.8, text/plain;q=0.5, */*;q=0.2","entity"in e?t.registry.lookup(n).then(function(n){var r=t.client||e.originator;return i.attempt(n.write,e.entity,{client:r,request:e}).otherwise(function(){throw"mime-serialization"}).then(function(t){return e.entity=t,e})},function(){throw"mime-unknown"}):e},response:function(e,t){if(!(e.headers&&e.headers["Content-Type"]&&e.entity))return e;var n=e.headers["Content-Type"];return t.registry.lookup(n).otherwise(function(){return r}).then(function(n){var r=t.client||e.request&&e.request.originator;return i.attempt(n.read,e.entity,{client:r,response:e}).otherwise(function(t){throw e.error="mime-deserialization",e.cause=t,e}).then(function(t){return e.entity=t,e})})}})})}("function"==typeof define&&define.amd?define:function(n){t.exports=n(e)})},{"../interceptor":36,"../mime/registry":39,when:62}],39:[function(e,t){!function(e){"use strict";e(function(t){function n(e){return e.split(/[;\+]/)[0].trim()}function r(e){var t={};"function"==typeof e&&(e=function(e){return{lookup:function(n){return t[n]=e(n),t[n]}}}(e)),this.lookup=function(r){return r=n(r),r in t?t[r]:e.lookup(r)},this.register=function(e,r){return e=n(e),t[e]=u.resolve(r),t[e]}}function i(e){var n;return u.promise(function(r,i){n=setTimeout(i,1e3),t(["./type/"+e],r,i)}).otherwise(function(t){return u.reject(t||new Error("Timeout while loading mime module: "+e))}).ensure(function(){clearTimeout(n)})}function o(e){return u.promise(function(n,r){try{n(t("./type/"+e))}catch(i){r(i)}})}var u,a;return u=t("when"),r.prototype={child:function(){return new r(this)}},a=new r("function"==typeof e&&e.amd?i:o),a.register("text/plain",t("./type/text/plain")),a.register("application/json",t("./type/application/json")),a})}("function"==typeof define&&define.amd?define:function(n){t.exports=n(e)})},{"./type/application/json":40,"./type/text/plain":41,when:62}],40:[function(e,t){!function(e){"use strict";e(function(){return{read:function(e){return JSON.parse(e)},write:function(e){return JSON.stringify(e)}}})}("function"==typeof define&&define.amd?define:function(n){t.exports=n(e)})},{}],41:[function(e,t){!function(e){"use strict";e(function(){return{read:function(e){return e},write:function(e){return e.toString()}}})}("function"==typeof define&&define.amd?define:function(n){t.exports=n(e)})},{}],42:[function(e,t){(function(n){!function(e,t){"use strict";var n;e(function(e){function r(){return o.apply(n,arguments)}var i,o,u;return i=e("./client"),o=u=function(){if(t&&t.versions&&t.versions.node){var n="./client/node";return e(n)}return e("./client/xhr")}(),r.setDefaultClient=function(e){o=e},r.getDefaultClient=function(){return o},r.resetDefaultClient=function(){o=u},i(r)})}("function"==typeof define&&define.amd?define:function(n){t.exports=n(e)},"undefined"==typeof n?void 0:n)}).call(this,e("_process"))},{"./client":34,"./client/xhr":35,_process:31}],43:[function(e,t){!function(e){"use strict";e(function(){function e(e){var n,r,i,o;for(e||(e={}),n=1,r=arguments.length;r>n;n+=1){i=arguments[n];for(o in i)o in e&&(e[o]===i[o]||o in t&&t[o]===i[o])||(e[o]=i[o])}return e}var t={};return e})}("function"==typeof define&&define.amd?define:function(n){t.exports=n(e)})},{}],44:[function(e,t){!function(e){"use strict";e(function(){function e(e){return e.toLowerCase().split("-").map(function(e){return e.charAt(0).toUpperCase()+e.slice(1)}).join("-")}return e})}("function"==typeof define&&define.amd?define:function(n){t.exports=n(e)})},{}],45:[function(e,t){!function(e){"use strict";e(function(e){function t(){return i.apply(this,arguments)}function n(e,t){return e.then(function(e){return e&&e[t]},function(e){return o.reject(e&&e[t])})}function r(e){return new t(e.then.bind(e))}var i=e("when/lib/Promise"),o=e("when"),u=e("./normalizeHeaderName");return t.prototype=Object.create(i.prototype),t.prototype.entity=function(){return n(this,"entity")},t.prototype.status=function(){return n(n(this,"status"),"code")},t.prototype.headers=function(){return n(this,"headers")},t.prototype.header=function(e){return e=u(e),n(this.headers(),e)},r.ResponsePromise=t,r})}("function"==typeof define&&define.amd?define:function(n){t.exports=n(e)})},{"./normalizeHeaderName":44,when:62,"when/lib/Promise":46}],46:[function(e,t){!function(e){"use strict";e(function(e){var t=e("./makePromise"),n=e("./Scheduler"),r=e("./async");return t({scheduler:new n(r)})})}("function"==typeof define&&define.amd?define:function(n){t.exports=n(e)})},{"./Scheduler":48,"./async":50,"./makePromise":60}],47:[function(e,t){!function(e){"use strict";e(function(){function e(e){this.head=this.tail=this.length=0,this.buffer=new Array(1<<e)}return e.prototype.push=function(e){return this.length===this.buffer.length&&this._ensureCapacity(2*this.length),this.buffer[this.tail]=e,this.tail=this.tail+1&this.buffer.length-1,++this.length,this.length},e.prototype.shift=function(){var e=this.buffer[this.head];return this.buffer[this.head]=void 0,this.head=this.head+1&this.buffer.length-1,--this.length,e},e.prototype._ensureCapacity=function(e){var t,n=this.head,r=this.buffer,i=new Array(e),o=0;if(0===n)for(t=this.length;t>o;++o)i[o]=r[o];else{for(e=r.length,t=this.tail;e>n;++o,++n)i[o]=r[n];for(n=0;t>n;++o,++n)i[o]=r[n]}this.buffer=i,this.head=0,this.tail=this.length},e})}("function"==typeof define&&define.amd?define:function(e){t.exports=e()})},{}],48:[function(e,t){!function(e){"use strict";e(function(e){function t(e){this._async=e,this._queue=new r(15),this._afterQueue=new r(5),this._running=!1;var t=this;this.drain=function(){t._drain()}}function n(e){for(;e.length>0;)e.shift().run()}var r=e("./Queue");return t.prototype.enqueue=function(e){this._add(this._queue,e)},t.prototype.afterQueue=function(e){this._add(this._afterQueue,e)},t.prototype._drain=function(){n(this._queue),this._running=!1,n(this._afterQueue)},t.prototype._add=function(e,t){e.push(t),this._running||(this._running=!0,this._async(this.drain))},t})}("function"==typeof define&&define.amd?define:function(n){t.exports=n(e)})},{"./Queue":47}],49:[function(e,t){!function(e){"use strict";e(function(){function e(t){Error.call(this),this.message=t,this.name=e.name,"function"==typeof Error.captureStackTrace&&Error.captureStackTrace(this,e)}return e.prototype=Object.create(Error.prototype),e.prototype.constructor=e,e})}("function"==typeof define&&define.amd?define:function(e){t.exports=e()})},{}],50:[function(e,t){(function(n){!function(e){"use strict";e(function(e){var t,r;return t="undefined"!=typeof n&&null!==n&&"function"==typeof n.nextTick?function(e){n.nextTick(e)}:(r="function"==typeof MutationObserver&&MutationObserver||"function"==typeof WebKitMutationObserver&&WebKitMutationObserver)?function(e,t){function n(){var e=r;r=void 0,e()}var r,i=e.createElement("div"),o=new t(n);return o.observe(i,{attributes:!0}),function(e){r=e,i.setAttribute("class","x")}}(document,r):function(e){try{return e("vertx").runOnLoop||e("vertx").runOnContext}catch(t){}var n=setTimeout;return function(e){n(e,0)}}(e)})}("function"==typeof define&&define.amd?define:function(n){t.exports=n(e)})}).call(this,e("_process"))},{_process:31}],51:[function(e,t){!function(e){"use strict";e(function(){return function(e){function t(t){return new e(function(e,n){function i(e){o.push(e),0===--u&&n(o)}var o=[],u=r(t,e,i);0===u&&n(new RangeError("any() input must not be empty"))})}function n(t,n){return new e(function(e,i,o){function u(t){l>0&&(--l,c.push(t),0===l&&e(c))}function a(e){s>0&&(--s,f.push(e),0===s&&i(f))}var s,c=[],f=[],l=r(t,u,a,o);n=Math.max(n,0),s=l-n+1,l=Math.min(n,l),n>l?i(new RangeError("some() input must contain at least "+n+" element(s), but had "+l)):0===l&&e(c)})}function r(e,t,n,r){return l.call(e,function(e,i){return d(i).then(t,n,r),e+1},0)}function i(e,t){function n(e,n){return t(n,e)}return"object"!=typeof e?d([]):h(f(function(e,t){return d(e).fold(n,t)},e))}function o(e,t){return h(e).then(function(e){return h(f(t,e)).then(function(t){for(var n,r=t.length,i=new Array(r),o=0,u=0;r>o;++o)n=t[o],(void 0!==n||o in t)&&t[o]&&(i[u++]=e[o]);return i.length=u,i})})}function u(e){return h(f(function(e){function t(){return e.inspect()}return e=d(e),e.then(t,t)},e))}function a(e,t){var n=c(t);return arguments.length>2?l.call(e,n,arguments[2]):l.call(e,n)}function s(e,t){var n=c(t);return arguments.length>2?p.call(e,n,arguments[2]):p.call(e,n)}function c(e){return function(t,n,r){return d(t).then(function(t){return d(n).then(function(n){return e(t,n,r)})})}}function f(e,t){for(var n,r=t.length,i=new Array(r),o=0;r>o;++o)n=t[o],(void 0!==n||o in t)&&(i[o]=e(t[o],o));return i}var l=Array.prototype.reduce,p=Array.prototype.reduceRight,d=e.resolve,h=e.all;return e.any=t,e.some=n,e.settle=u,e.map=i,e.filter=o,e.reduce=a,e.reduceRight=s,e.prototype.spread=function(e){return this.then(h).then(function(t){return e.apply(void 0,t)})},e}})}("function"==typeof define&&define.amd?define:function(e){t.exports=e()})},{}],52:[function(e,t){!function(e){"use strict";e(function(){function e(){throw new TypeError("catch predicate must be a function")}function t(e,t){return n(t)?e instanceof t:t(e)}function n(e){return e===Error||null!=e&&e.prototype instanceof Error}function r(e){return function(){return e.call(this)}}return function(n){function i(e,n){return function(r){return t(r,n)?e.call(this,r):o(r)}}var o=n.reject,u=n.prototype["catch"];return n.prototype.done=function(e,t){this._handler.visit(this._handler.receiver,e,t)},n.prototype["catch"]=n.prototype.otherwise=function(t){return arguments.length<2?u.call(this,t):"function"!=typeof t?this.ensure(e):u.call(this,i(arguments[1],t))},n.prototype["finally"]=n.prototype.ensure=function(e){if("function"!=typeof e)return this;var t=r(e);return this.then(t,t)["yield"](this)},n.prototype["else"]=n.prototype.orElse=function(e){return this.then(void 0,function(){return e})},n.prototype["yield"]=function(e){return this.then(function(){return e})},n.prototype.tap=function(e){return this.then(e)["yield"](this)},n}})}("function"==typeof define&&define.amd?define:function(e){t.exports=e()})},{}],53:[function(e,t){!function(e){"use strict";e(function(){return function(e){return e.prototype.fold=function(t,n){var r=this._beget();return this._handler.fold(function(n,r,i){e._handler(n).fold(function(e,n,r){r.resolve(t.call(this,n,e))},r,this,i)},n,r._handler.receiver,r._handler),r},e}})}("function"==typeof define&&define.amd?define:function(e){t.exports=e()})},{}],54:[function(e,t){!function(e){"use strict";e(function(){return function(e){function t(e){var t=e.state();return 0===t?{state:"pending"}:t>0?{state:"fulfilled",value:e.value}:{state:"rejected",reason:e.value}}return e.prototype.inspect=function(){return t(e._handler(this))},e}})}("function"==typeof define&&define.amd?define:function(e){t.exports=e()})},{}],55:[function(e,t){!function(e){"use strict";e(function(){return function(e){function t(e,t,r,i){return n(function(t){return[t,e(t)]},t,r,i)}function n(e,t,i,o){function u(o,u){return r(i(o)).then(function(){return n(e,t,i,u)})}return r(o).then(function(n){return r(t(n)).then(function(t){return t?n:r(e(n)).spread(u)})})}var r=e.resolve;return e.iterate=t,e.unfold=n,e}})}("function"==typeof define&&define.amd?define:function(e){t.exports=e()})},{}],56:[function(e,t){!function(e){"use strict";e(function(){return function(e){return e.prototype.progress=function(e){return this.then(void 0,void 0,e)},e}})}("function"==typeof define&&define.amd?define:function(e){t.exports=e()})},{}],57:[function(e,t){!function(e){"use strict";e(function(e){function t(e,t,r,i){return n.set(function(){e(r,i,t)},t)}var n=e("../timer"),r=e("../TimeoutError");return function(e){function i(e,n,r){t(o,e,n,r)}function o(e,t){t.resolve(e)}function u(e,t,n){var i="undefined"==typeof e?new r("timed out after "+n+"ms"):e;t.reject(i)}return e.prototype.delay=function(e){var t=this._beget();return this._handler.fold(i,e,void 0,t._handler),t},e.prototype.timeout=function(e,r){var i=this._beget(),o=i._handler,a=t(u,e,r,i._handler);return this._handler.visit(o,function(e){n.clear(a),this.resolve(e)},function(e){n.clear(a),this.reject(e)},o.notify),i},e}})}("function"==typeof define&&define.amd?define:function(n){t.exports=n(e)})},{"../TimeoutError":49,"../timer":61}],58:[function(e,t){!function(e){"use strict";e(function(e){function t(e){var t="object"==typeof e&&e.stack?e.stack:n(e);return e instanceof Error?t:t+" (WARNING: non-Error used)"}function n(e){var t=String(e);return"[object Object]"===t&&"undefined"!=typeof JSON&&(t=r(e,t)),t}function r(e,t){try{return JSON.stringify(e)}catch(e){return t}}function i(e){throw e}function o(){}var u=e("../timer");return function(e){function r(e){e.handled||(d.push(e),f("Potentially unhandled rejection ["+e.id+"] "+t(e.value)))}function a(e){var t=d.indexOf(e);t>=0&&(d.splice(t,1),l("Handled previous rejection ["+e.id+"] "+n(e.value)))}function s(e,t){p.push(e,t),h||(h=!0,h=u.set(c,0))}function c(){for(h=!1;p.length>0;)p.shift()(p.shift())}var f=o,l=o;"undefined"!=typeof console&&(f="undefined"!=typeof console.error?function(e){console.error(e)}:function(e){console.log(e)},l="undefined"!=typeof console.info?function(e){console.info(e)}:function(e){console.log(e)}),e.onPotentiallyUnhandledRejection=function(e){s(r,e)},e.onPotentiallyUnhandledRejectionHandled=function(e){s(a,e)},e.onFatalRejection=function(e){s(i,e.value)};var p=[],d=[],h=!1;return e}})}("function"==typeof define&&define.amd?define:function(n){t.exports=n(e)})},{"../timer":61}],59:[function(e,t){!function(e){"use strict";e(function(){return function(e){return e.prototype["with"]=e.prototype.withThis=function(e){var t=this._beget(),n=t._handler;return n.receiver=e,this._handler.chain(n,e),t},e}})}("function"==typeof define&&define.amd?define:function(e){t.exports=e()})},{}],60:[function(e,t){!function(e){"use strict";e(function(){return function(e){function t(e,t){this._handler=e===l?t:n(e)}function n(e){function t(e){i.resolve(e)}function n(e){i.reject(e)}function r(e){i.notify(e)}var i=new d;try{e(t,n,r)}catch(o){n(o)}return i}function r(e){return _(e)?e:new t(l,new h(c(e)))}function i(e){return new t(l,new h(new m(e)))}function o(){return D}function u(){return new t(l,new d)}function a(e){function n(e,t,n){this[e]=t,0===--s&&n.become(new y(this))}var r,i,o,u,a=new d,s=e.length>>>0,c=new Array(s);for(r=0;r<e.length;++r)if(o=e[r],void 0!==o||r in e)if(O(o))if(i=_(o)?o._handler.join():f(o),u=i.state(),0===u)i.fold(n,r,c,a);else{if(!(u>0)){a.become(i);break}c[r]=i.value,--s}else c[r]=o,--s;else--s;return 0===s&&a.become(new y(c)),new t(l,a)}function s(e){if(Object(e)===e&&0===e.length)return o();var n,r,i=new d;for(n=0;n<e.length;++n)r=e[n],void 0!==r&&n in e&&c(r).visit(i,i.resolve,i.reject);return new t(l,i)}function c(e){return _(e)?e._handler.join():O(e)?f(e):new y(e)}function f(e){try{var t=e.then;return"function"==typeof t?new g(t,e):new y(e)}catch(n){return new m(n)}}function l(){}function p(){}function d(e,n){t.createContext(this,n),this.consumers=void 0,this.receiver=e,this.handler=void 0,this.resolved=!1}function h(e){this.handler=e}function g(e,t){d.call(this),I.enqueue(new E(e,t,this))}function y(e){t.createContext(this),this.value=e}function m(e){t.createContext(this),this.id=++M,this.value=e,this.handled=!1,this.reported=!1,this._report()}function v(e,t){this.rejection=e,this.context=t}function x(e){this.rejection=e}function b(){return new m(new TypeError("Promise cycle"))}function w(e,t){this.continuation=e,this.handler=t}function A(e,t){this.handler=t,this.value=e}function E(e,t,n){this._then=e,this.thenable=t,this.resolver=n}function C(e,t,n,r,i){try{e.call(t,n,r,i)}catch(o){r(o)}}function _(e){return e instanceof t}function O(e){return("object"==typeof e||"function"==typeof e)&&null!==e}function S(e,n,r,i){return"function"!=typeof e?i.become(n):(t.enterContext(n),k(e,n.value,r,i),void t.exitContext())}function U(e,n,r,i,o){return"function"!=typeof e?o.become(r):(t.enterContext(r),P(e,n,r.value,i,o),void t.exitContext())}function j(e,n,r,i,o){return"function"!=typeof e?o.notify(n):(t.enterContext(r),T(e,n,i,o),void t.exitContext())}function k(e,t,n,r){try{r.become(c(e.call(n,t)))}catch(i){r.become(new m(i))}}function P(e,t,n,r,i){try{e.call(r,t,n,i)}catch(o){i.become(new m(o))}}function T(e,t,n,r){try{r.notify(e.call(n,t))}catch(i){r.notify(i)}}function L(e,t){t.prototype=B(e.prototype),t.prototype.constructor=t}function R(){}var I=e.scheduler,B=Object.create||function(e){function t(){}return t.prototype=e,new t};t.resolve=r,t.reject=i,t.never=o,t._defer=u,t._handler=c,t.prototype.then=function(e,n){var r=this._handler;if("function"!=typeof e&&r.join().state()>0)return new t(l,r);var i=this._beget(),o=i._handler;return r.chain(o,r.receiver,e,n,arguments.length>2?arguments[2]:void 0),i},t.prototype["catch"]=function(e){return this.then(void 0,e)},t.prototype._beget=function(){var e=this._handler,t=new d(e.receiver,e.join().context);return new this.constructor(l,t)},t.all=a,t.race=s,l.prototype.when=l.prototype.become=l.prototype.notify=l.prototype.fail=l.prototype._unreport=l.prototype._report=R,l.prototype._state=0,l.prototype.state=function(){return this._state},l.prototype.join=function(){for(var e=this;void 0!==e.handler;)e=e.handler;return e},l.prototype.chain=function(e,t,n,r,i){this.when({resolver:e,receiver:t,fulfilled:n,rejected:r,progress:i})},l.prototype.visit=function(e,t,n,r){this.chain(N,e,t,n,r)},l.prototype.fold=function(e,t,n,r){this.visit(r,function(r){e.call(n,t,r,this)},r.reject,r.notify)},L(l,p),p.prototype.become=function(e){e.fail()};var N=new p;L(l,d),d.prototype._state=0,d.prototype.resolve=function(e){this.become(c(e))},d.prototype.reject=function(e){this.resolved||this.become(new m(e))},d.prototype.join=function(){if(!this.resolved)return this;for(var e=this;void 0!==e.handler;)if(e=e.handler,e===this)return this.handler=b();return e},d.prototype.run=function(){var e=this.consumers,t=this.join();this.consumers=void 0;for(var n=0;n<e.length;++n)t.when(e[n])},d.prototype.become=function(e){this.resolved||(this.resolved=!0,this.handler=e,void 0!==this.consumers&&I.enqueue(this),void 0!==this.context&&e._report(this.context))},d.prototype.when=function(e){this.resolved?I.enqueue(new w(e,this.handler)):void 0===this.consumers?this.consumers=[e]:this.consumers.push(e)},d.prototype.notify=function(e){this.resolved||I.enqueue(new A(e,this))
},d.prototype.fail=function(e){var t="undefined"==typeof e?this.context:e;this.resolved&&this.handler.join().fail(t)},d.prototype._report=function(e){this.resolved&&this.handler.join()._report(e)},d.prototype._unreport=function(){this.resolved&&this.handler.join()._unreport()},L(l,h),h.prototype.when=function(e){I.enqueue(new w(e,this))},h.prototype._report=function(e){this.join()._report(e)},h.prototype._unreport=function(){this.join()._unreport()},L(d,g),L(l,y),y.prototype._state=1,y.prototype.fold=function(e,t,n,r){U(e,t,this,n,r)},y.prototype.when=function(e){S(e.fulfilled,this,e.receiver,e.resolver)};var M=0;L(l,m),m.prototype._state=-1,m.prototype.fold=function(e,t,n,r){r.become(this)},m.prototype.when=function(e){"function"==typeof e.rejected&&this._unreport(),S(e.rejected,this,e.receiver,e.resolver)},m.prototype._report=function(e){I.afterQueue(new v(this,e))},m.prototype._unreport=function(){this.handled=!0,I.afterQueue(new x(this))},m.prototype.fail=function(e){t.onFatalRejection(this,void 0===e?this.context:e)},v.prototype.run=function(){this.rejection.handled||(this.rejection.reported=!0,t.onPotentiallyUnhandledRejection(this.rejection,this.context))},x.prototype.run=function(){this.rejection.reported&&t.onPotentiallyUnhandledRejectionHandled(this.rejection)},t.createContext=t.enterContext=t.exitContext=t.onPotentiallyUnhandledRejection=t.onPotentiallyUnhandledRejectionHandled=t.onFatalRejection=R;var H=new l,D=new t(l,H);return w.prototype.run=function(){this.handler.join().when(this.continuation)},A.prototype.run=function(){var e=this.handler.consumers;if(void 0!==e)for(var t,n=0;n<e.length;++n)t=e[n],j(t.progress,this.value,this.handler,t.receiver,t.resolver)},E.prototype.run=function(){function e(e){r.resolve(e)}function t(e){r.reject(e)}function n(e){r.notify(e)}var r=this.resolver;C(this._then,this.thenable,e,t,n)},t}})}("function"==typeof define&&define.amd?define:function(e){t.exports=e()})},{}],61:[function(e,t){!function(e){"use strict";e(function(e){var t,n,r,i;t=e;try{n=t("vertx"),r=function(e,t){return n.setTimer(t,e)},i=n.cancelTimer}catch(o){r=function(e,t){return setTimeout(e,t)},i=function(e){return clearTimeout(e)}}return{set:r,clear:i}})}("function"==typeof define&&define.amd?define:function(n){t.exports=n(e)})},{}],62:[function(e,t){!function(e){"use strict";e(function(e){function t(e,t,n){var r=O.resolve(e);return arguments.length<2?r:arguments.length>3?r.then(t,n,arguments[3]):r.then(t,n)}function n(e){return new O(e)}function r(e){return function(){return o(e,this,S.call(arguments))}}function i(e){return o(e,this,S.call(arguments,1))}function o(e,t,n){return O.all(n).then(function(n){return e.apply(t,n)})}function u(){return new a}function a(){function e(e){r._handler.resolve(e)}function t(e){r._handler.reject(e)}function n(e){r._handler.notify(e)}var r=O._defer();this.promise=r,this.resolve=e,this.reject=t,this.notify=n,this.resolver={resolve:e,reject:t,notify:n}}function s(e){return e&&"function"==typeof e.then}function c(){return O.all(arguments)}function f(e){return t(e,O.all)}function l(e){return t(e,O.settle)}function p(e,n){return t(e,function(e){return O.map(e,n)})}function d(e,n){return t(e,function(e){return O.filter(e,n)})}function h(e){var n=S.call(arguments,1);return t(e,function(e){return n.unshift(e),O.reduce.apply(O,n)})}function g(e){var n=S.call(arguments,1);return t(e,function(e){return n.unshift(e),O.reduceRight.apply(O,n)})}var y=e("./lib/decorators/timed"),m=e("./lib/decorators/array"),v=e("./lib/decorators/flow"),x=e("./lib/decorators/fold"),b=e("./lib/decorators/inspect"),w=e("./lib/decorators/iterate"),A=e("./lib/decorators/progress"),E=e("./lib/decorators/with"),C=e("./lib/decorators/unhandledRejection"),_=e("./lib/TimeoutError"),O=[m,v,x,w,A,b,E,y,C].reduce(function(e,t){return t(e)},e("./lib/Promise")),S=Array.prototype.slice;return t.promise=n,t.resolve=O.resolve,t.reject=O.reject,t.lift=r,t["try"]=i,t.attempt=i,t.iterate=O.iterate,t.unfold=O.unfold,t.join=c,t.all=f,t.settle=l,t.any=r(O.any),t.some=r(O.some),t.race=r(O.race),t.map=p,t.filter=d,t.reduce=h,t.reduceRight=g,t.isPromiseLike=s,t.Promise=O,t.defer=u,t.TimeoutError=_,t})}("function"==typeof define&&define.amd?define:function(n){t.exports=n(e)})},{"./lib/Promise":46,"./lib/TimeoutError":49,"./lib/decorators/array":51,"./lib/decorators/flow":52,"./lib/decorators/fold":53,"./lib/decorators/inspect":54,"./lib/decorators/iterate":55,"./lib/decorators/progress":56,"./lib/decorators/timed":57,"./lib/decorators/unhandledRejection":58,"./lib/decorators/with":59}]},{},[7]);